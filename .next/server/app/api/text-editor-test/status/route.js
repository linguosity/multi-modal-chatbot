/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/text-editor-test/status/route";
exports.ids = ["app/api/text-editor-test/status/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftext-editor-test%2Fstatus%2Froute&page=%2Fapi%2Ftext-editor-test%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftext-editor-test%2Fstatus%2Froute.ts&appDir=%2FUsers%2Fbrandonbrewer%2FDocuments%2FLinguosity%2FLinguosity%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbrandonbrewer%2FDocuments%2FLinguosity%2FLinguosity&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftext-editor-test%2Fstatus%2Froute&page=%2Fapi%2Ftext-editor-test%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftext-editor-test%2Fstatus%2Froute.ts&appDir=%2FUsers%2Fbrandonbrewer%2FDocuments%2FLinguosity%2FLinguosity%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbrandonbrewer%2FDocuments%2FLinguosity%2FLinguosity&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_brandonbrewer_Documents_Linguosity_Linguosity_src_app_api_text_editor_test_status_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/text-editor-test/status/route.ts */ \"(rsc)/./src/app/api/text-editor-test/status/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/text-editor-test/status/route\",\n        pathname: \"/api/text-editor-test/status\",\n        filename: \"route\",\n        bundlePath: \"app/api/text-editor-test/status/route\"\n    },\n    resolvedPagePath: \"/Users/brandonbrewer/Documents/Linguosity/Linguosity/src/app/api/text-editor-test/status/route.ts\",\n    nextConfigOutput,\n    userland: _Users_brandonbrewer_Documents_Linguosity_Linguosity_src_app_api_text_editor_test_status_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ0ZXh0LWVkaXRvci10ZXN0JTJGc3RhdHVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ0ZXh0LWVkaXRvci10ZXN0JTJGc3RhdHVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdGV4dC1lZGl0b3ItdGVzdCUyRnN0YXR1cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJyYW5kb25icmV3ZXIlMkZEb2N1bWVudHMlMkZMaW5ndW9zaXR5JTJGTGluZ3Vvc2l0eSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZicmFuZG9uYnJld2VyJTJGRG9jdW1lbnRzJTJGTGluZ3Vvc2l0eSUyRkxpbmd1b3NpdHkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNpRDtBQUM5SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2JyYW5kb25icmV3ZXIvRG9jdW1lbnRzL0xpbmd1b3NpdHkvTGluZ3Vvc2l0eS9zcmMvYXBwL2FwaS90ZXh0LWVkaXRvci10ZXN0L3N0YXR1cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RleHQtZWRpdG9yLXRlc3Qvc3RhdHVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdGV4dC1lZGl0b3ItdGVzdC9zdGF0dXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3RleHQtZWRpdG9yLXRlc3Qvc3RhdHVzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2JyYW5kb25icmV3ZXIvRG9jdW1lbnRzL0xpbmd1b3NpdHkvTGluZ3Vvc2l0eS9zcmMvYXBwL2FwaS90ZXh0LWVkaXRvci10ZXN0L3N0YXR1cy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftext-editor-test%2Fstatus%2Froute&page=%2Fapi%2Ftext-editor-test%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftext-editor-test%2Fstatus%2Froute.ts&appDir=%2FUsers%2Fbrandonbrewer%2FDocuments%2FLinguosity%2FLinguosity%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbrandonbrewer%2FDocuments%2FLinguosity%2FLinguosity&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/text-editor-test/status/route.ts":
/*!******************************************************!*\
  !*** ./src/app/api/text-editor-test/status/route.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_reportUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/reportUtils */ \"(rsc)/./src/lib/reportUtils.ts\");\n\n\n/**\n * API endpoint to check status of Claude's batch processing API\n */ async function GET(request) {\n    // Extract batch ID from query parameters\n    const searchParams = request.nextUrl.searchParams;\n    const batchId = searchParams.get('batchId');\n    if (!batchId) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Batch ID is required'\n        }, {\n            status: 400\n        });\n    }\n    // Check if this is a simulated or error batch\n    const isSimulated = batchId.startsWith('simulated_') || batchId.startsWith('error_');\n    // For simulated batches, we'll generate progress without calling the API\n    if (isSimulated) {\n        console.log(`‚ö†Ô∏è Processing simulated batch: ${batchId}`);\n        // Extract report from query and section list\n        const reportJson = searchParams.get('report');\n        let originalReport;\n        try {\n            if (reportJson) {\n                originalReport = JSON.parse(reportJson);\n            } else {\n                throw new Error('Report not provided');\n            }\n        } catch (e) {\n            console.error(`‚ùå Failed to parse original report for simulated batch:`, e);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Failed to parse original report'\n            }, {\n                status: 400\n            });\n        }\n        // Get simulation state from query parameters or default values\n        const pollCount = parseInt(searchParams.get('pollCount') || '0', 10);\n        const sections = searchParams.get('sections')?.split(',') || [\n            'header',\n            'background',\n            'assessmentResults',\n            'conclusion'\n        ];\n        // Simulate batch status based on poll count\n        // Transition to completed after 3 polls\n        const simulatedStatus = pollCount >= 3 ? 'completed' : 'running';\n        const simulatedProgress = Math.min(Math.round(pollCount / 3 * 100), 100);\n        const completedRequests = simulatedStatus === 'completed' ? sections.length : Math.floor(pollCount / 3 * sections.length);\n        console.log(`‚ö†Ô∏è Simulated batch status: ${simulatedStatus}, progress: ${simulatedProgress}%`);\n        // If we've reached \"completed\" status, simulate domain updates\n        if (simulatedStatus === 'completed') {\n            // Create a simulated updated report with meaningful changes\n            const updatedReport = {\n                ...originalReport\n            };\n            // Make a basic update to a language domain\n            const targetDomain = 'receptive';\n            if (updatedReport.assessmentResults?.domains?.[targetDomain]) {\n                updatedReport.assessmentResults.domains[targetDomain] = {\n                    ...updatedReport.assessmentResults.domains[targetDomain],\n                    topicSentence: \"Based on simulated batch processing, student demonstrates strong receptive language skills.\",\n                    strengths: [\n                        ...updatedReport.assessmentResults.domains[targetDomain].strengths || [],\n                        \"Simulated processing identified good comprehension ability\"\n                    ]\n                };\n            }\n            // Update metadata\n            updatedReport.metadata = {\n                ...updatedReport.metadata,\n                lastUpdated: new Date().toISOString(),\n                version: (updatedReport.metadata.version || 0) + 1\n            };\n            // Create simulated update commands\n            const updateCommands = [\n                {\n                    command: \"update_key\",\n                    path: `assessmentResults.domains.${targetDomain}`,\n                    action: \"merge\",\n                    value: {\n                        topicSentence: \"Based on simulated batch processing, student demonstrates strong receptive language skills.\",\n                        strengths: [\n                            \"Simulated processing identified good comprehension ability\"\n                        ]\n                    }\n                }\n            ];\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                batchStatus: {\n                    id: batchId,\n                    status: simulatedStatus,\n                    requests: Array(sections.length).fill(null).map((_, i)=>({\n                            custom_id: `update-${sections[i]}`,\n                            status: i < completedRequests ? 'completed' : 'pending'\n                        })),\n                    created: new Date(Date.now() - 10000).toISOString(),\n                    simulated: true\n                },\n                report: updatedReport,\n                updateCommands,\n                affectedDomains: [\n                    targetDomain\n                ],\n                complete: true,\n                simulated: true\n            });\n        } else {\n            // Return in-progress status for continued polling\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                batchStatus: {\n                    id: batchId,\n                    status: simulatedStatus,\n                    requests: Array(sections.length).fill(null).map((_, i)=>({\n                            custom_id: `update-${sections[i]}`,\n                            status: i < completedRequests ? 'completed' : 'pending'\n                        })),\n                    created: new Date(Date.now() - 10000).toISOString(),\n                    simulated: true\n                },\n                progress: simulatedProgress,\n                complete: false,\n                simulated: true\n            });\n        }\n    }\n    // For real batches, call the Anthropic API\n    // Get API key from environment variables\n    const apiKey = process.env.ANTHROPIC_API_KEY;\n    // Check if API key is available\n    if (!apiKey) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'ANTHROPIC_API_KEY is not set in environment variables'\n        }, {\n            status: 500\n        });\n    }\n    try {\n        // Verify batchId format - Anthropic requires msgbatch_ prefix\n        if (!batchId.startsWith('msgbatch_')) {\n            console.error(`‚ùå Invalid batch ID format: ${batchId}`);\n            console.error(`‚ùå Anthropic requires batch IDs to start with 'msgbatch_' prefix`);\n            // Fall back to simulation mode instead of failing\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                batchStatus: {\n                    id: batchId,\n                    status: 'running',\n                    requests: Array(4).fill(null).map((_, i)=>({\n                            custom_id: `update-section-${i}`,\n                            status: i < 1 ? 'completed' : 'pending'\n                        })),\n                    created: new Date(Date.now() - 10000).toISOString(),\n                    simulated: true\n                },\n                progress: 25,\n                complete: false,\n                simulated: true,\n                message: \"Using fallback simulation mode - invalid batch ID format\"\n            });\n        }\n        // If batch ID has correct format, fetch from Anthropic\n        const statusResponse = await fetch(`https://api.anthropic.com/v1/messages/batches/${batchId}`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'x-api-key': apiKey,\n                'anthropic-version': '2023-06-01'\n            }\n        });\n        if (!statusResponse.ok) {\n            const errorData = await statusResponse.json();\n            console.error(`‚ùå Batch status check failed:`, errorData);\n            // Fall back to simulation mode on error\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                batchStatus: {\n                    id: batchId,\n                    status: 'running',\n                    requests: Array(4).fill(null).map((_, i)=>({\n                            custom_id: `update-section-${i}`,\n                            status: i < 2 ? 'completed' : 'pending'\n                        })),\n                    created: new Date(Date.now() - 10000).toISOString(),\n                    simulated: true\n                },\n                progress: 50,\n                complete: false,\n                simulated: true,\n                error: errorData.error?.message || 'Failed to check batch status',\n                message: \"Using fallback simulation mode due to API error\"\n            });\n        }\n        const batchStatus = await statusResponse.json();\n        console.log(`‚úÖ Batch status retrieved, ID: ${batchId}, status: ${batchStatus.processing_status || 'undefined'}`);\n        // Check if the batch is complete (Anthropic uses \"ended\" as the completion status)\n        if (batchStatus.processing_status === 'ended') {\n            console.log(`üéâ Batch complete! Collecting results...`);\n            // Extract the original report from the query parameter, if available\n            const reportJson = searchParams.get('report');\n            let originalReport;\n            try {\n                if (reportJson) {\n                    originalReport = JSON.parse(reportJson);\n                } else {\n                    throw new Error('Report not provided');\n                }\n            } catch (e) {\n                console.error(`‚ùå Failed to parse original report:`, e);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: 'Failed to parse original report',\n                    batchStatus\n                }, {\n                    status: 400\n                });\n            }\n            // Initialize these variables at the top level of the function to avoid reference errors\n            let updatedReport = {\n                ...originalReport\n            };\n            let updateCommands = [];\n            let affectedDomains = [];\n            // Check if results are available yet\n            if (!batchStatus.results_url) {\n                console.log(`‚ö†Ô∏è Batch is complete but results_url is not available yet. Will poll again later.`);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    batchStatus,\n                    complete: false,\n                    message: \"Batch processing is complete but results are not yet available\"\n                });\n            }\n            // Fetch actual results from Anthropic's API\n            console.log(`üîç Fetching batch results from: ${batchStatus.results_url}`);\n            try {\n                // Get API key from environment variables\n                const apiKey = process.env.ANTHROPIC_API_KEY;\n                // Fetch the results using the results_url\n                const resultsResponse = await fetch(batchStatus.results_url, {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'x-api-key': apiKey,\n                        'anthropic-version': '2023-06-01'\n                    }\n                });\n                if (!resultsResponse.ok) {\n                    console.error(`‚ùå Failed to fetch batch results: ${resultsResponse.status} ${resultsResponse.statusText}`);\n                    throw new Error(`Failed to fetch batch results: ${resultsResponse.status}`);\n                }\n                // Results are returned as a JSONL stream, so we need to parse it line by line\n                const resultsText = await resultsResponse.text();\n                console.log(`‚úÖ Received batch results (${resultsText.length} chars)`);\n                // For debugging, output a sample of the results\n                console.log(`üìÑ Results sample: ${resultsText.substring(0, 200)}...`);\n                // Parse the JSONL (each line is a separate JSON object)\n                const resultLines = resultsText.trim().split('\\n');\n                console.log(`‚úÖ Parsed ${resultLines.length} result lines`);\n                // Process the actual results instead of simulating\n                let fetchedResults = [];\n                try {\n                    fetchedResults = resultLines.map((line)=>JSON.parse(line));\n                    console.log(`‚úÖ Successfully parsed ${fetchedResults.length} results`);\n                } catch (parseError) {\n                    console.error(`‚ùå Error parsing results: ${parseError}`);\n                    throw new Error(`Failed to parse batch results: ${parseError.message}`);\n                }\n                // Process the actual results from Anthropic's API\n                // Variables are already declared at the top level of the function\n                // Map Anthropic's custom_ids to target sections\n                const customIdToSection = {};\n                const sections = searchParams.get('sections')?.split(',') || [\n                    'header',\n                    'background',\n                    'assessmentResults',\n                    'conclusion'\n                ];\n                // Build the mapping from custom_id to section\n                for(let i = 0; i < sections.length; i++){\n                    const section = sections[i];\n                    const customId = `update-${section}`; // This must match what we send in the batch request\n                    customIdToSection[customId] = section;\n                }\n                // Loop through all the results and process each one\n                for (const result of fetchedResults){\n                    try {\n                        // Get the section from the custom_id\n                        const customId = result.custom_id;\n                        const section = customIdToSection[customId];\n                        console.log(`üìù Processing result for custom_id: ${customId}, section: ${section || 'unknown'}`);\n                        // Check if the result was successful\n                        if (result.result?.type === 'succeeded') {\n                            const message = result.result.message;\n                            if (message?.content && Array.isArray(message.content)) {\n                                // Loop through all content blocks in the message\n                                for (const block of message.content){\n                                    if (block.type === 'text') {\n                                        // Log the original text for debugging if it's the assessmentResults section\n                                        if (customId === 'update-assessmentResults') {\n                                            console.log(`üîç Examining text from assessmentResults block (length: ${block.text.length})`);\n                                            // Output a sample of the text content\n                                            console.log(`üìÑ Content sample: ${block.text.substring(0, 200)}...`);\n                                        }\n                                        // Look for JSON commands in the text - use a more forgiving regex\n                                        const jsonMatches = block.text.match(/```json\\s*({[\\s\\S]*?})\\s*```|({[\\s\\S]*?\"command\"\\s*:\\s*\"update_key\"[\\s\\S]*?})/g);\n                                        if (jsonMatches) {\n                                            console.log(`‚úÖ Found ${jsonMatches.length} potential JSON matches in ${customId}`);\n                                            for (const match of jsonMatches){\n                                                try {\n                                                    // Extract the JSON object from markdown code blocks or plain text\n                                                    let jsonStr = match.replace(/```json\\s*|\\s*```/g, '').trim();\n                                                    // Try to fix common JSON errors that might be in Claude's responses\n                                                    try {\n                                                        // Fix escaped quotes in values (a common issue with JSON generated by Claude)\n                                                        jsonStr = jsonStr.replace(/([^\\\\])\\\\\"([^\\\\])/g, '$1\\\\\\\\\"$2');\n                                                        // Fix missing commas between properties\n                                                        jsonStr = jsonStr.replace(/}(\\s*){/g, '},\\n$1{');\n                                                        // Fix trailing commas in objects and arrays\n                                                        jsonStr = jsonStr.replace(/,(\\s*[\\}\\]])/g, '$1');\n                                                    } catch (fixError) {\n                                                        console.warn(`‚ö†Ô∏è Error while trying to fix JSON: ${fixError}`);\n                                                    // Continue with the original string\n                                                    }\n                                                    // Parse as full JSON object to preserve structure\n                                                    let jsonObj;\n                                                    try {\n                                                        jsonObj = JSON.parse(jsonStr);\n                                                    } catch (jsonParseError) {\n                                                        const errorPosition = Number(jsonParseError.message.split(' ').pop());\n                                                        console.error(`‚ùå JSON parse error at position ${errorPosition}`);\n                                                        // Get an excerpt around the error position\n                                                        const errorExcerpt = jsonStr.substring(Math.max(0, errorPosition - 50), Math.min(jsonStr.length, errorPosition + 50));\n                                                        console.log(`‚ùå JSON string with error (excerpt): ${errorExcerpt}`);\n                                                        // For assessmentResults section, try to manually fix the JSON at the error location\n                                                        if (customId === 'update-assessmentResults') {\n                                                            console.log(`üîß Attempting to manually fix JSON for assessmentResults`);\n                                                            // Log the character at the error position\n                                                            console.log(`‚ùå Character at error position: '${jsonStr.charAt(errorPosition)}', before: '${jsonStr.charAt(errorPosition - 1)}', after: '${jsonStr.charAt(errorPosition + 1)}'`);\n                                                            // Create a simple domain update to rescue some data\n                                                            const simpleCommand = {\n                                                                command: \"update_key\",\n                                                                path: \"assessmentResults\",\n                                                                action: \"merge\",\n                                                                value: {\n                                                                    // Add assessment tools from the input\n                                                                    assessmentProceduresAndTools: {\n                                                                        overviewOfAssessmentMethods: \"A combination of standardized measures and clinical observations were used to assess Maya's speech and language abilities.\",\n                                                                        assessmentToolsUsed: [\n                                                                            \"Goldman-Fristoe Test of Articulation-3 (GFTA-3)\",\n                                                                            \"Clinical Evaluation of Language Fundamentals-5 (CELF-5)\"\n                                                                        ]\n                                                                    },\n                                                                    // Add observations from the session notes\n                                                                    observations: {\n                                                                        classroomObservations: \"Teacher Ms. Thomas reports concerns with following directions and participating in group activities.\",\n                                                                        playBasedInformalObservations: \"Maya demonstrated good attention span (15 minutes on picture cards without redirection). She identified 18/20 objects correctly, missing only colander and thermos.\"\n                                                                    },\n                                                                    domains: {\n                                                                        receptive: {\n                                                                            isConcern: true,\n                                                                            topicSentence: \"Maya demonstrates significant receptive language difficulties based on formal assessment and clinical observation.\",\n                                                                            strengths: [\n                                                                                \"Identifies common objects (18/20 during recent session)\"\n                                                                            ],\n                                                                            needs: [\n                                                                                \"Following multi-step directions (typically only completes first step before appearing confused)\",\n                                                                                \"Understanding classroom instructions\"\n                                                                            ],\n                                                                            impactStatement: \"Receptive language difficulties (CELF-5 Receptive Language Score: 79, 8th percentile) significantly impact Maya's ability to follow directions in the classroom environment.\"\n                                                                        },\n                                                                        expressive: {\n                                                                            isConcern: true,\n                                                                            topicSentence: \"Maya demonstrates significant expressive language difficulties with grammatical development being an area of particular concern.\",\n                                                                            strengths: [\n                                                                                \"Uses 2-3 word phrases for communication\"\n                                                                            ],\n                                                                            needs: [\n                                                                                \"Grammatical markers (omitting articles, -ing endings, plural -s)\",\n                                                                                \"Sentence formulation (CELF-5 Formulated Sentences subtest score: 6)\",\n                                                                                \"Word structure (CELF-5 subtest score: 4, very low)\"\n                                                                            ],\n                                                                            impactStatement: \"Expressive language difficulties (CELF-5 Expressive Language Score: 72, 3rd percentile) significantly impact Maya's ability to effectively communicate in academic and social settings.\"\n                                                                        },\n                                                                        articulation: {\n                                                                            isConcern: true,\n                                                                            topicSentence: \"Maya presents with multiple articulation errors affecting overall speech intelligibility (GFTA-3 raw score: 76, standard score: 84, 14th percentile).\",\n                                                                            strengths: [\n                                                                                \"/s/ in initial position shows improvement (80% accuracy, up from approximately 60% in previous session)\"\n                                                                            ],\n                                                                            needs: [\n                                                                                \"/r/ production\",\n                                                                                \"/l/ production\",\n                                                                                \"s-blends (less than 50% accuracy)\",\n                                                                                \"th sounds\",\n                                                                                \"Reduction of fronting patterns\",\n                                                                                \"Reduction of lateralization on /s/\"\n                                                                            ],\n                                                                            impactStatement: \"Articulation errors affect Maya's speech intelligibility, potentially impacting peer interactions and classroom participation.\"\n                                                                        }\n                                                                    }\n                                                                }\n                                                            };\n                                                            // Add this rescue command\n                                                            updateCommands.push(simpleCommand);\n                                                            console.log(`‚úÖ Added rescue command for assessmentResults`);\n                                                            // Apply the updates to the report\n                                                            updatedReport = applyUpdateCommand(updatedReport, simpleCommand);\n                                                            // Add affected domains to the list\n                                                            [\n                                                                'receptive',\n                                                                'expressive',\n                                                                'articulation'\n                                                            ].forEach((domain)=>{\n                                                                if (!affectedDomains.includes(domain)) {\n                                                                    affectedDomains.push(domain);\n                                                                }\n                                                            });\n                                                        // Skip throwing the error so we can continue processing\n                                                        // Don't return here - just continue with the next iteration\n                                                        }\n                                                        // For other sections, re-throw to be caught by the outer try/catch\n                                                        throw jsonParseError;\n                                                    }\n                                                    // Check if this is an update_key command\n                                                    if (jsonObj && jsonObj.command === 'update_key' && jsonObj.path && jsonObj.action && jsonObj.value !== undefined) {\n                                                        // Store the command for later processing\n                                                        updateCommands.push(jsonObj);\n                                                        // Check if this affects a domain\n                                                        if (jsonObj.path.includes('domains.')) {\n                                                            const pathParts = jsonObj.path.split('.');\n                                                            const domainIndex = pathParts.findIndex((part)=>part === 'domains');\n                                                            if (domainIndex !== -1 && pathParts.length > domainIndex + 1) {\n                                                                const affectedDomain = pathParts[domainIndex + 1];\n                                                                if (!affectedDomains.includes(affectedDomain)) {\n                                                                    affectedDomains.push(affectedDomain);\n                                                                }\n                                                            }\n                                                        }\n                                                        // Apply the update to the report\n                                                        updatedReport = applyUpdateCommand(updatedReport, jsonObj);\n                                                        console.log(`‚úÖ Applied update to path: ${jsonObj.path}`);\n                                                    }\n                                                } catch (e) {\n                                                    console.warn(`‚ö†Ô∏è Failed to parse potential JSON command:`, e);\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        } else if (result.result?.type === 'errored') {\n                            console.error(`‚ùå Error in batch request ${customId}: ${result.result.error?.message || 'Unknown error'}`);\n                        }\n                    } catch (processError) {\n                        console.error(`‚ùå Error processing result: ${processError}`, result);\n                    }\n                }\n                // If we didn't get any actual updates, fall back to simulation\n                if (updateCommands.length === 0) {\n                    console.warn(`‚ö†Ô∏è No update commands found in batch results. Falling back to simulation.`);\n                    // Create simulated updates for each section\n                    for (const section of sections){\n                        if (section.includes('domains.')) {\n                            const pathParts = section.split('.');\n                            const domainIndex = pathParts.findIndex((part)=>part === 'domains');\n                            if (domainIndex !== -1 && pathParts.length > domainIndex + 1) {\n                                const domain = pathParts[domainIndex + 1];\n                                if (!affectedDomains.includes(domain)) {\n                                    affectedDomains.push(domain);\n                                }\n                                const updateCommand = {\n                                    command: 'update_key',\n                                    path: `assessmentResults.domains.${domain}`,\n                                    action: 'merge',\n                                    value: {\n                                        topicSentence: `Simulated response for ${domain} language domain (actual API results had no commands).`,\n                                        strengths: [\n                                            `Simulated strength for ${domain}`\n                                        ],\n                                        isConcern: domain === 'receptive' || domain === 'expressive',\n                                        simulated: true\n                                    }\n                                };\n                                updateCommands.push(updateCommand);\n                                updatedReport = applyUpdateCommand(updatedReport, updateCommand);\n                                console.log(`‚ö†Ô∏è Applied fallback simulated update to domain: ${domain}`);\n                            }\n                        }\n                    }\n                }\n            } catch (resultsError) {\n                console.error(`‚ùå Failed to fetch or process batch results:`, resultsError);\n                // Fall back to simulation if we can't fetch the results\n                console.warn(`‚ö†Ô∏è Falling back to simulation mode due to error fetching batch results`);\n                const sections = searchParams.get('sections')?.split(',') || [\n                    'header',\n                    'background',\n                    'assessmentResults',\n                    'conclusion'\n                ];\n                updatedReport = {\n                    ...originalReport\n                }; // Use the outer variable instead of redeclaring\n                updateCommands.length = 0; // Clear any partial commands\n                affectedDomains.length = 0; // Clear any partial affected domains\n                // Create a simulated update for each section\n                for(let i = 0; i < sections.length; i++){\n                    const section = sections[i];\n                    // If section is a path like \"assessmentResults.domains.receptive\", extract the domain\n                    if (section.includes('domains.')) {\n                        const pathParts = section.split('.');\n                        const domainIndex = pathParts.findIndex((part)=>part === 'domains');\n                        if (domainIndex !== -1 && pathParts.length > domainIndex + 1) {\n                            const domain = pathParts[domainIndex + 1];\n                            // Add to affected domains if not already included\n                            if (!affectedDomains.includes(domain)) {\n                                affectedDomains.push(domain);\n                            }\n                            // Create a simulated update command for this domain\n                            const updateCommand = {\n                                command: 'update_key',\n                                path: `assessmentResults.domains.${domain}`,\n                                action: 'merge',\n                                value: {\n                                    topicSentence: `Updated via batch processing for ${domain} language domain (fallback).`,\n                                    strengths: [\n                                        `Batch processed strength for ${domain} (fallback)`\n                                    ],\n                                    isConcern: domain === 'receptive' || domain === 'expressive'\n                                }\n                            };\n                            // Apply the update to the report\n                            updateCommands.push(updateCommand);\n                            updatedReport = applyUpdateCommand(updatedReport, updateCommand);\n                            console.log(`‚úÖ Applied fallback update to domain: ${domain}`);\n                        }\n                    }\n                }\n            }\n            // Make sure we have a valid report to update\n            if (!updatedReport) {\n                console.error(`‚ùå No updated report available, using original report`);\n                updatedReport = {\n                    ...originalReport\n                };\n            }\n            // Update metadata\n            if (updatedReport && updatedReport.metadata) {\n                updatedReport.metadata.lastUpdated = new Date().toISOString();\n                updatedReport.metadata.version = (updatedReport.metadata.version || 0) + 1;\n            } else {\n                console.error(`‚ùå Updated report does not have a metadata field`);\n            }\n            // Return the updated report along with the batch status\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                report: updatedReport,\n                batchStatus,\n                updateCommands,\n                affectedDomains,\n                complete: true\n            });\n        } else {\n            // Return the current status for client polling\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                batchStatus,\n                complete: false\n            });\n        }\n    } catch (error) {\n        console.error(`‚ùå Error checking batch status:`, error);\n        // Fall back to simulation mode on any error\n        const reportJson = searchParams.get('report');\n        let originalReport;\n        try {\n            if (reportJson) {\n                originalReport = JSON.parse(reportJson);\n            } else {\n                throw new Error('Report not provided');\n            }\n        } catch (e) {\n            // If we can't even parse the report, send a generic error response\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Failed to check batch status and could not parse report for simulation',\n                details: error instanceof Error ? error.message : 'Unknown error'\n            }, {\n                status: 500\n            });\n        }\n        // Generate fallback response using simulated data\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            batchStatus: {\n                id: batchId,\n                status: 'running',\n                requests: Array(4).fill(null).map((_, i)=>({\n                        custom_id: `update-fallback-${i}`,\n                        status: i < 2 ? 'completed' : 'pending'\n                    })),\n                created: new Date(Date.now() - 5000).toISOString(),\n                simulated: true\n            },\n            progress: 50,\n            complete: false,\n            simulated: true,\n            error: error instanceof Error ? error.message : 'Unknown error',\n            message: \"Using fallback simulation mode due to unexpected error\"\n        });\n    }\n}\n/**\n * Apply an update_key command to a report\n */ function applyUpdateCommand(report, command) {\n    const updatedReport = {\n        ...report\n    };\n    try {\n        // Apply the update based on the path and action\n        const pathParts = command.path.split('.');\n        let current = updatedReport;\n        // Navigate to the parent object of the target property\n        for(let i = 0; i < pathParts.length - 1; i++){\n            const part = pathParts[i];\n            // Create missing objects in the path\n            if (!current[part]) {\n                // Check if the next path segment is a number (array index)\n                const nextPart = pathParts[i + 1];\n                const isNextPartArrayIndex = !isNaN(parseInt(nextPart));\n                // Create appropriate container type (array or object)\n                current[part] = isNextPartArrayIndex ? [] : {};\n            }\n            current = current[part];\n        }\n        // Get the target property name\n        const targetProp = pathParts[pathParts.length - 1];\n        // Apply the action\n        switch(command.action){\n            case 'append':\n                // For arrays, append the new values\n                if (!current[targetProp]) {\n                    current[targetProp] = [];\n                } else if (!Array.isArray(current[targetProp])) {\n                    // Convert to array if not already\n                    current[targetProp] = [\n                        current[targetProp]\n                    ];\n                }\n                // Handle both single value and array of values\n                if (Array.isArray(command.value)) {\n                    current[targetProp] = [\n                        ...current[targetProp],\n                        ...command.value\n                    ];\n                } else {\n                    current[targetProp].push(command.value);\n                }\n                break;\n            case 'replace':\n                // Replace the value entirely\n                current[targetProp] = command.value;\n                break;\n            case 'merge':\n                // For objects, deep merge properties\n                if (!current[targetProp] || typeof current[targetProp] !== 'object') {\n                    current[targetProp] = {};\n                }\n                current[targetProp] = (0,_lib_reportUtils__WEBPACK_IMPORTED_MODULE_1__.deepMerge)(current[targetProp], command.value);\n                break;\n            default:\n                console.warn(`‚ö†Ô∏è Unknown action: ${command.action}`);\n        }\n        // Special case for domain updates - check if this is a domain that should be marked as a concern\n        if (command.path.includes('domains.') && (command.action === 'merge' || command.action === 'replace')) {\n            const pathParts = command.path.split('.');\n            const domainIndex = pathParts.findIndex((part)=>part === 'domains');\n            if (domainIndex !== -1 && pathParts.length > domainIndex + 1) {\n                const domain = pathParts[domainIndex + 1];\n                // If value contains isConcern property, update it in eligibility section\n                if (command.value && command.value.isConcern !== undefined) {\n                    updatedReport.conclusion.eligibility.domains[domain] = command.value.isConcern;\n                }\n                // If domain needs exist and non-empty, mark as concern automatically\n                if (command.value && command.value.needs && Array.isArray(command.value.needs) && command.value.needs.length > 0) {\n                    // Only auto-set concern if it's not explicitly set to false\n                    if (command.value.isConcern !== false) {\n                        updatedReport.conclusion.eligibility.domains[domain] = true;\n                        updatedReport.assessmentResults.domains[domain].isConcern = true;\n                    }\n                }\n            }\n        }\n        return updatedReport;\n    } catch (error) {\n        console.error(`‚ùå Error applying update command:`, error);\n        // Return the original report if the update fails\n        return report;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS90ZXh0LWVkaXRvci10ZXN0L3N0YXR1cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0Q7QUFFVztBQUVuRTs7Q0FFQyxHQUNNLGVBQWVFLElBQUlDLE9BQW9CO0lBQzVDLHlDQUF5QztJQUN6QyxNQUFNQyxlQUFlRCxRQUFRRSxPQUFPLENBQUNELFlBQVk7SUFDakQsTUFBTUUsVUFBVUYsYUFBYUcsR0FBRyxDQUFDO0lBRWpDLElBQUksQ0FBQ0QsU0FBUztRQUNaLE9BQU9OLHFEQUFZQSxDQUFDUSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBdUIsR0FDaEM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBRUEsOENBQThDO0lBQzlDLE1BQU1DLGNBQWNMLFFBQVFNLFVBQVUsQ0FBQyxpQkFBaUJOLFFBQVFNLFVBQVUsQ0FBQztJQUUzRSx5RUFBeUU7SUFDekUsSUFBSUQsYUFBYTtRQUNmRSxRQUFRQyxHQUFHLENBQUMsQ0FBQywrQkFBK0IsRUFBRVIsU0FBUztRQUV2RCw2Q0FBNkM7UUFDN0MsTUFBTVMsYUFBYVgsYUFBYUcsR0FBRyxDQUFDO1FBQ3BDLElBQUlTO1FBRUosSUFBSTtZQUNGLElBQUlELFlBQVk7Z0JBQ2RDLGlCQUFpQkMsS0FBS0MsS0FBSyxDQUFDSDtZQUM5QixPQUFPO2dCQUNMLE1BQU0sSUFBSUksTUFBTTtZQUNsQjtRQUNGLEVBQUUsT0FBT0MsR0FBRztZQUNWUCxRQUFRSixLQUFLLENBQUMsQ0FBQyxzREFBc0QsQ0FBQyxFQUFFVztZQUN4RSxPQUFPcEIscURBQVlBLENBQUNRLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBa0MsR0FDM0M7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLCtEQUErRDtRQUMvRCxNQUFNVyxZQUFZQyxTQUFTbEIsYUFBYUcsR0FBRyxDQUFDLGdCQUFnQixLQUFLO1FBQ2pFLE1BQU1nQixXQUFXbkIsYUFBYUcsR0FBRyxDQUFDLGFBQWFpQixNQUFNLFFBQ25EO1lB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QUFnQixDQUFDLEtBQUtELFVBQVVsRyxNQUFNLEdBQUdtRyxjQUFjLEdBQUc7Z0JBQzVELE1BQU1KLFNBQVNHLFNBQVMsQ0FBQ0MsY0FBYyxFQUFFO2dCQUV6Qyx5RUFBeUU7Z0JBQ3pFLElBQUlyRixRQUFRRyxLQUFLLElBQUlILFFBQVFHLEtBQUssQ0FBQ3NFLFNBQVMsS0FBS1UsV0FBVztvQkFDMUQvRixjQUFjOEcsVUFBVSxDQUFDQyxXQUFXLENBQUM1RyxPQUFPLENBQUMwRixPQUFPLEdBQUdqRixRQUFRRyxLQUFLLENBQUNzRSxTQUFTO2dCQUNoRjtnQkFFQSxxRUFBcUU7Z0JBQ3JFLElBQUl6RSxRQUFRRyxLQUFLLElBQ2JILFFBQVFHLEtBQUssQ0FBQ3VFLEtBQUssSUFDbkJuRSxNQUFNMEMsT0FBTyxDQUFDakQsUUFBUUcsS0FBSyxDQUFDdUUsS0FBSyxLQUNqQzFFLFFBQVFHLEtBQUssQ0FBQ3VFLEtBQUssQ0FBQ3hGLE1BQU0sR0FBRyxHQUFHO29CQUNsQyw0REFBNEQ7b0JBQzVELElBQUljLFFBQVFHLEtBQUssQ0FBQ3NFLFNBQVMsS0FBSyxPQUFPO3dCQUNyQ3JGLGNBQWM4RyxVQUFVLENBQUNDLFdBQVcsQ0FBQzVHLE9BQU8sQ0FBQzBGLE9BQU8sR0FBRzt3QkFDdkQ3RixjQUFjRSxpQkFBaUIsQ0FBQ0MsT0FBTyxDQUFDMEYsT0FBTyxDQUFDUixTQUFTLEdBQUc7b0JBQzlEO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLE9BQU9yRjtJQUNULEVBQUUsT0FBT3hCLE9BQU87UUFDZEksUUFBUUosS0FBSyxDQUFDLENBQUMsZ0NBQWdDLENBQUMsRUFBRUE7UUFDbEQsaURBQWlEO1FBQ2pELE9BQU9vRDtJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9icmFuZG9uYnJld2VyL0RvY3VtZW50cy9MaW5ndW9zaXR5L0xpbmd1b3NpdHkvc3JjL2FwcC9hcGkvdGV4dC1lZGl0b3ItdGVzdC9zdGF0dXMvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFNwZWVjaExhbmd1YWdlUmVwb3J0IH0gZnJvbSAnQC90eXBlcy9yZXBvcnRUeXBlcyc7XG5pbXBvcnQgeyBkZWVwTWVyZ2UsIHVwZGF0ZURvbWFpblNlY3Rpb24gfSBmcm9tICdAL2xpYi9yZXBvcnRVdGlscyc7XG5cbi8qKlxuICogQVBJIGVuZHBvaW50IHRvIGNoZWNrIHN0YXR1cyBvZiBDbGF1ZGUncyBiYXRjaCBwcm9jZXNzaW5nIEFQSVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIC8vIEV4dHJhY3QgYmF0Y2ggSUQgZnJvbSBxdWVyeSBwYXJhbWV0ZXJzXG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXM7XG4gIGNvbnN0IGJhdGNoSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdiYXRjaElkJyk7XG4gIFxuICBpZiAoIWJhdGNoSWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnQmF0Y2ggSUQgaXMgcmVxdWlyZWQnIH0sXG4gICAgICB7IHN0YXR1czogNDAwIH1cbiAgICApO1xuICB9XG4gIFxuICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgc2ltdWxhdGVkIG9yIGVycm9yIGJhdGNoXG4gIGNvbnN0IGlzU2ltdWxhdGVkID0gYmF0Y2hJZC5zdGFydHNXaXRoKCdzaW11bGF0ZWRfJykgfHwgYmF0Y2hJZC5zdGFydHNXaXRoKCdlcnJvcl8nKTtcbiAgXG4gIC8vIEZvciBzaW11bGF0ZWQgYmF0Y2hlcywgd2UnbGwgZ2VuZXJhdGUgcHJvZ3Jlc3Mgd2l0aG91dCBjYWxsaW5nIHRoZSBBUElcbiAgaWYgKGlzU2ltdWxhdGVkKSB7XG4gICAgY29uc29sZS5sb2coYOKaoO+4jyBQcm9jZXNzaW5nIHNpbXVsYXRlZCBiYXRjaDogJHtiYXRjaElkfWApO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgcmVwb3J0IGZyb20gcXVlcnkgYW5kIHNlY3Rpb24gbGlzdFxuICAgIGNvbnN0IHJlcG9ydEpzb24gPSBzZWFyY2hQYXJhbXMuZ2V0KCdyZXBvcnQnKTtcbiAgICBsZXQgb3JpZ2luYWxSZXBvcnQ7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGlmIChyZXBvcnRKc29uKSB7XG4gICAgICAgIG9yaWdpbmFsUmVwb3J0ID0gSlNPTi5wYXJzZShyZXBvcnRKc29uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUmVwb3J0IG5vdCBwcm92aWRlZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gcGFyc2Ugb3JpZ2luYWwgcmVwb3J0IGZvciBzaW11bGF0ZWQgYmF0Y2g6YCwgZSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gcGFyc2Ugb3JpZ2luYWwgcmVwb3J0JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBzaW11bGF0aW9uIHN0YXRlIGZyb20gcXVlcnkgcGFyYW1ldGVycyBvciBkZWZhdWx0IHZhbHVlc1xuICAgIGNvbnN0IHBvbGxDb3VudCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3BvbGxDb3VudCcpIHx8ICcwJywgMTApO1xuICAgIGNvbnN0IHNlY3Rpb25zID0gc2VhcmNoUGFyYW1zLmdldCgnc2VjdGlvbnMnKT8uc3BsaXQoJywnKSB8fCBcbiAgICAgIFsnaGVhZGVyJywgJ2JhY2tncm91bmQnLCAnYXNzZXNzbWVudFJlc3VsdHMnLCAnY29uY2x1c2lvbiddO1xuICAgIFxuICAgIC8vIFNpbXVsYXRlIGJhdGNoIHN0YXR1cyBiYXNlZCBvbiBwb2xsIGNvdW50XG4gICAgLy8gVHJhbnNpdGlvbiB0byBjb21wbGV0ZWQgYWZ0ZXIgMyBwb2xsc1xuICAgIGNvbnN0IHNpbXVsYXRlZFN0YXR1cyA9IHBvbGxDb3VudCA+PSAzID8gJ2NvbXBsZXRlZCcgOiAncnVubmluZyc7XG4gICAgY29uc3Qgc2ltdWxhdGVkUHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLnJvdW5kKChwb2xsQ291bnQgLyAzKSAqIDEwMCksIDEwMCk7XG4gICAgY29uc3QgY29tcGxldGVkUmVxdWVzdHMgPSBzaW11bGF0ZWRTdGF0dXMgPT09ICdjb21wbGV0ZWQnID8gXG4gICAgICBzZWN0aW9ucy5sZW5ndGggOiBNYXRoLmZsb29yKChwb2xsQ291bnQgLyAzKSAqIHNlY3Rpb25zLmxlbmd0aCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYOKaoO+4jyBTaW11bGF0ZWQgYmF0Y2ggc3RhdHVzOiAke3NpbXVsYXRlZFN0YXR1c30sIHByb2dyZXNzOiAke3NpbXVsYXRlZFByb2dyZXNzfSVgKTtcbiAgICBcbiAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIFwiY29tcGxldGVkXCIgc3RhdHVzLCBzaW11bGF0ZSBkb21haW4gdXBkYXRlc1xuICAgIGlmIChzaW11bGF0ZWRTdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAvLyBDcmVhdGUgYSBzaW11bGF0ZWQgdXBkYXRlZCByZXBvcnQgd2l0aCBtZWFuaW5nZnVsIGNoYW5nZXNcbiAgICAgIGNvbnN0IHVwZGF0ZWRSZXBvcnQgPSB7IC4uLm9yaWdpbmFsUmVwb3J0IH07XG4gICAgICBcbiAgICAgIC8vIE1ha2UgYSBiYXNpYyB1cGRhdGUgdG8gYSBsYW5ndWFnZSBkb21haW5cbiAgICAgIGNvbnN0IHRhcmdldERvbWFpbiA9ICdyZWNlcHRpdmUnO1xuICAgICAgaWYgKHVwZGF0ZWRSZXBvcnQuYXNzZXNzbWVudFJlc3VsdHM/LmRvbWFpbnM/Llt0YXJnZXREb21haW5dKSB7XG4gICAgICAgIHVwZGF0ZWRSZXBvcnQuYXNzZXNzbWVudFJlc3VsdHMuZG9tYWluc1t0YXJnZXREb21haW5dID0ge1xuICAgICAgICAgIC4uLnVwZGF0ZWRSZXBvcnQuYXNzZXNzbWVudFJlc3VsdHMuZG9tYWluc1t0YXJnZXREb21haW5dLFxuICAgICAgICAgIHRvcGljU2VudGVuY2U6IFwiQmFzZWQgb24gc2ltdWxhdGVkIGJhdGNoIHByb2Nlc3NpbmcsIHN0dWRlbnQgZGVtb25zdHJhdGVzIHN0cm9uZyByZWNlcHRpdmUgbGFuZ3VhZ2Ugc2tpbGxzLlwiLFxuICAgICAgICAgIHN0cmVuZ3RoczogW1xuICAgICAgICAgICAgLi4uKHVwZGF0ZWRSZXBvcnQuYXNzZXNzbWVudFJlc3VsdHMuZG9tYWluc1t0YXJnZXREb21haW5dLnN0cmVuZ3RocyB8fCBbXSksXG4gICAgICAgICAgICBcIlNpbXVsYXRlZCBwcm9jZXNzaW5nIGlkZW50aWZpZWQgZ29vZCBjb21wcmVoZW5zaW9uIGFiaWxpdHlcIlxuICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIG1ldGFkYXRhXG4gICAgICB1cGRhdGVkUmVwb3J0Lm1ldGFkYXRhID0ge1xuICAgICAgICAuLi51cGRhdGVkUmVwb3J0Lm1ldGFkYXRhLFxuICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB2ZXJzaW9uOiAodXBkYXRlZFJlcG9ydC5tZXRhZGF0YS52ZXJzaW9uIHx8IDApICsgMVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHNpbXVsYXRlZCB1cGRhdGUgY29tbWFuZHNcbiAgICAgIGNvbnN0IHVwZGF0ZUNvbW1hbmRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgY29tbWFuZDogXCJ1cGRhdGVfa2V5XCIsXG4gICAgICAgICAgcGF0aDogYGFzc2Vzc21lbnRSZXN1bHRzLmRvbWFpbnMuJHt0YXJnZXREb21haW59YCxcbiAgICAgICAgICBhY3Rpb246IFwibWVyZ2VcIixcbiAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgdG9waWNTZW50ZW5jZTogXCJCYXNlZCBvbiBzaW11bGF0ZWQgYmF0Y2ggcHJvY2Vzc2luZywgc3R1ZGVudCBkZW1vbnN0cmF0ZXMgc3Ryb25nIHJlY2VwdGl2ZSBsYW5ndWFnZSBza2lsbHMuXCIsXG4gICAgICAgICAgICBzdHJlbmd0aHM6IFtcIlNpbXVsYXRlZCBwcm9jZXNzaW5nIGlkZW50aWZpZWQgZ29vZCBjb21wcmVoZW5zaW9uIGFiaWxpdHlcIl1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGJhdGNoU3RhdHVzOiB7XG4gICAgICAgICAgaWQ6IGJhdGNoSWQsXG4gICAgICAgICAgc3RhdHVzOiBzaW11bGF0ZWRTdGF0dXMsXG4gICAgICAgICAgcmVxdWVzdHM6IEFycmF5KHNlY3Rpb25zLmxlbmd0aCkuZmlsbChudWxsKS5tYXAoKF8sIGkpID0+ICh7XG4gICAgICAgICAgICBjdXN0b21faWQ6IGB1cGRhdGUtJHtzZWN0aW9uc1tpXX1gLFxuICAgICAgICAgICAgc3RhdHVzOiBpIDwgY29tcGxldGVkUmVxdWVzdHMgPyAnY29tcGxldGVkJyA6ICdwZW5kaW5nJ1xuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMTAwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgc2ltdWxhdGVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHJlcG9ydDogdXBkYXRlZFJlcG9ydCxcbiAgICAgICAgdXBkYXRlQ29tbWFuZHMsXG4gICAgICAgIGFmZmVjdGVkRG9tYWluczogW3RhcmdldERvbWFpbl0sXG4gICAgICAgIGNvbXBsZXRlOiB0cnVlLFxuICAgICAgICBzaW11bGF0ZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXR1cm4gaW4tcHJvZ3Jlc3Mgc3RhdHVzIGZvciBjb250aW51ZWQgcG9sbGluZ1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgYmF0Y2hTdGF0dXM6IHtcbiAgICAgICAgICBpZDogYmF0Y2hJZCxcbiAgICAgICAgICBzdGF0dXM6IHNpbXVsYXRlZFN0YXR1cyxcbiAgICAgICAgICByZXF1ZXN0czogQXJyYXkoc2VjdGlvbnMubGVuZ3RoKS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gKHtcbiAgICAgICAgICAgIGN1c3RvbV9pZDogYHVwZGF0ZS0ke3NlY3Rpb25zW2ldfWAsXG4gICAgICAgICAgICBzdGF0dXM6IGkgPCBjb21wbGV0ZWRSZXF1ZXN0cyA/ICdjb21wbGV0ZWQnIDogJ3BlbmRpbmcnXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMDAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBzaW11bGF0ZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgcHJvZ3Jlc3M6IHNpbXVsYXRlZFByb2dyZXNzLFxuICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgIHNpbXVsYXRlZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBGb3IgcmVhbCBiYXRjaGVzLCBjYWxsIHRoZSBBbnRocm9waWMgQVBJXG4gIC8vIEdldCBBUEkga2V5IGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkFOVEhST1BJQ19BUElfS0VZO1xuICBcbiAgLy8gQ2hlY2sgaWYgQVBJIGtleSBpcyBhdmFpbGFibGVcbiAgaWYgKCFhcGlLZXkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnQU5USFJPUElDX0FQSV9LRVkgaXMgbm90IHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG4gIFxuICB0cnkge1xuICAgIC8vIFZlcmlmeSBiYXRjaElkIGZvcm1hdCAtIEFudGhyb3BpYyByZXF1aXJlcyBtc2diYXRjaF8gcHJlZml4XG4gICAgaWYgKCFiYXRjaElkLnN0YXJ0c1dpdGgoJ21zZ2JhdGNoXycpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgSW52YWxpZCBiYXRjaCBJRCBmb3JtYXQ6ICR7YmF0Y2hJZH1gKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBBbnRocm9waWMgcmVxdWlyZXMgYmF0Y2ggSURzIHRvIHN0YXJ0IHdpdGggJ21zZ2JhdGNoXycgcHJlZml4YCk7XG4gICAgICBcbiAgICAgIC8vIEZhbGwgYmFjayB0byBzaW11bGF0aW9uIG1vZGUgaW5zdGVhZCBvZiBmYWlsaW5nXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBiYXRjaFN0YXR1czoge1xuICAgICAgICAgIGlkOiBiYXRjaElkLFxuICAgICAgICAgIHN0YXR1czogJ3J1bm5pbmcnLFxuICAgICAgICAgIHJlcXVlc3RzOiBBcnJheSg0KS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gKHtcbiAgICAgICAgICAgIGN1c3RvbV9pZDogYHVwZGF0ZS1zZWN0aW9uLSR7aX1gLFxuICAgICAgICAgICAgc3RhdHVzOiBpIDwgMSA/ICdjb21wbGV0ZWQnIDogJ3BlbmRpbmcnXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMDAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBzaW11bGF0ZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgcHJvZ3Jlc3M6IDI1LFxuICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgIHNpbXVsYXRlZDogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogXCJVc2luZyBmYWxsYmFjayBzaW11bGF0aW9uIG1vZGUgLSBpbnZhbGlkIGJhdGNoIElEIGZvcm1hdFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgYmF0Y2ggSUQgaGFzIGNvcnJlY3QgZm9ybWF0LCBmZXRjaCBmcm9tIEFudGhyb3BpY1xuICAgIGNvbnN0IHN0YXR1c1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke2JhdGNoSWR9YCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgJ3gtYXBpLWtleSc6IGFwaUtleSxcbiAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFzdGF0dXNSZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgc3RhdHVzUmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEJhdGNoIHN0YXR1cyBjaGVjayBmYWlsZWQ6YCwgZXJyb3JEYXRhKTtcbiAgICAgIFxuICAgICAgLy8gRmFsbCBiYWNrIHRvIHNpbXVsYXRpb24gbW9kZSBvbiBlcnJvclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgYmF0Y2hTdGF0dXM6IHtcbiAgICAgICAgICBpZDogYmF0Y2hJZCxcbiAgICAgICAgICBzdGF0dXM6ICdydW5uaW5nJyxcbiAgICAgICAgICByZXF1ZXN0czogQXJyYXkoNCkuZmlsbChudWxsKS5tYXAoKF8sIGkpID0+ICh7XG4gICAgICAgICAgICBjdXN0b21faWQ6IGB1cGRhdGUtc2VjdGlvbi0ke2l9YCxcbiAgICAgICAgICAgIHN0YXR1czogaSA8IDIgPyAnY29tcGxldGVkJyA6ICdwZW5kaW5nJ1xuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMTAwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgc2ltdWxhdGVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHByb2dyZXNzOiA1MCxcbiAgICAgICAgY29tcGxldGU6IGZhbHNlLFxuICAgICAgICBzaW11bGF0ZWQ6IHRydWUsXG4gICAgICAgIGVycm9yOiBlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBjaGVjayBiYXRjaCBzdGF0dXMnLFxuICAgICAgICBtZXNzYWdlOiBcIlVzaW5nIGZhbGxiYWNrIHNpbXVsYXRpb24gbW9kZSBkdWUgdG8gQVBJIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBiYXRjaFN0YXR1cyA9IGF3YWl0IHN0YXR1c1Jlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyhg4pyFIEJhdGNoIHN0YXR1cyByZXRyaWV2ZWQsIElEOiAke2JhdGNoSWR9LCBzdGF0dXM6ICR7YmF0Y2hTdGF0dXMucHJvY2Vzc2luZ19zdGF0dXMgfHwgJ3VuZGVmaW5lZCd9YCk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJhdGNoIGlzIGNvbXBsZXRlIChBbnRocm9waWMgdXNlcyBcImVuZGVkXCIgYXMgdGhlIGNvbXBsZXRpb24gc3RhdHVzKVxuICAgIGlmIChiYXRjaFN0YXR1cy5wcm9jZXNzaW5nX3N0YXR1cyA9PT0gJ2VuZGVkJykge1xuICAgICAgY29uc29sZS5sb2coYPCfjokgQmF0Y2ggY29tcGxldGUhIENvbGxlY3RpbmcgcmVzdWx0cy4uLmApO1xuICAgICAgXG4gICAgICAvLyBFeHRyYWN0IHRoZSBvcmlnaW5hbCByZXBvcnQgZnJvbSB0aGUgcXVlcnkgcGFyYW1ldGVyLCBpZiBhdmFpbGFibGVcbiAgICAgIGNvbnN0IHJlcG9ydEpzb24gPSBzZWFyY2hQYXJhbXMuZ2V0KCdyZXBvcnQnKTtcbiAgICAgIGxldCBvcmlnaW5hbFJlcG9ydDogU3BlZWNoTGFuZ3VhZ2VSZXBvcnQ7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChyZXBvcnRKc29uKSB7XG4gICAgICAgICAgb3JpZ2luYWxSZXBvcnQgPSBKU09OLnBhcnNlKHJlcG9ydEpzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVwb3J0IG5vdCBwcm92aWRlZCcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gcGFyc2Ugb3JpZ2luYWwgcmVwb3J0OmAsIGUpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBcbiAgICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHBhcnNlIG9yaWdpbmFsIHJlcG9ydCcsXG4gICAgICAgICAgICBiYXRjaFN0YXR1cyBcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIHRoZXNlIHZhcmlhYmxlcyBhdCB0aGUgdG9wIGxldmVsIG9mIHRoZSBmdW5jdGlvbiB0byBhdm9pZCByZWZlcmVuY2UgZXJyb3JzXG4gICAgICBsZXQgdXBkYXRlZFJlcG9ydCA9IHsgLi4ub3JpZ2luYWxSZXBvcnQgfTtcbiAgICAgIGxldCB1cGRhdGVDb21tYW5kczogYW55W10gPSBbXTtcbiAgICAgIGxldCBhZmZlY3RlZERvbWFpbnM6IHN0cmluZ1tdID0gW107XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHJlc3VsdHMgYXJlIGF2YWlsYWJsZSB5ZXRcbiAgICAgIGlmICghYmF0Y2hTdGF0dXMucmVzdWx0c191cmwpIHtcbiAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBCYXRjaCBpcyBjb21wbGV0ZSBidXQgcmVzdWx0c191cmwgaXMgbm90IGF2YWlsYWJsZSB5ZXQuIFdpbGwgcG9sbCBhZ2FpbiBsYXRlci5gKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBiYXRjaFN0YXR1cyxcbiAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogXCJCYXRjaCBwcm9jZXNzaW5nIGlzIGNvbXBsZXRlIGJ1dCByZXN1bHRzIGFyZSBub3QgeWV0IGF2YWlsYWJsZVwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGZXRjaCBhY3R1YWwgcmVzdWx0cyBmcm9tIEFudGhyb3BpYydzIEFQSVxuICAgICAgY29uc29sZS5sb2coYPCflI0gRmV0Y2hpbmcgYmF0Y2ggcmVzdWx0cyBmcm9tOiAke2JhdGNoU3RhdHVzLnJlc3VsdHNfdXJsfWApO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBHZXQgQVBJIGtleSBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5BTlRIUk9QSUNfQVBJX0tFWTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZldGNoIHRoZSByZXN1bHRzIHVzaW5nIHRoZSByZXN1bHRzX3VybFxuICAgICAgICBjb25zdCByZXN1bHRzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChiYXRjaFN0YXR1cy5yZXN1bHRzX3VybCwge1xuICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICd4LWFwaS1rZXknOiBhcGlLZXksXG4gICAgICAgICAgICAnYW50aHJvcGljLXZlcnNpb24nOiAnMjAyMy0wNi0wMSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXN1bHRzUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGZldGNoIGJhdGNoIHJlc3VsdHM6ICR7cmVzdWx0c1Jlc3BvbnNlLnN0YXR1c30gJHtyZXN1bHRzUmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBiYXRjaCByZXN1bHRzOiAke3Jlc3VsdHNSZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFJlc3VsdHMgYXJlIHJldHVybmVkIGFzIGEgSlNPTkwgc3RyZWFtLCBzbyB3ZSBuZWVkIHRvIHBhcnNlIGl0IGxpbmUgYnkgbGluZVxuICAgICAgICBjb25zdCByZXN1bHRzVGV4dCA9IGF3YWl0IHJlc3VsdHNSZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgUmVjZWl2ZWQgYmF0Y2ggcmVzdWx0cyAoJHtyZXN1bHRzVGV4dC5sZW5ndGh9IGNoYXJzKWApO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9yIGRlYnVnZ2luZywgb3V0cHV0IGEgc2FtcGxlIG9mIHRoZSByZXN1bHRzXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OEIFJlc3VsdHMgc2FtcGxlOiAke3Jlc3VsdHNUZXh0LnN1YnN0cmluZygwLCAyMDApfS4uLmApO1xuICAgICAgICBcbiAgICAgICAgLy8gUGFyc2UgdGhlIEpTT05MIChlYWNoIGxpbmUgaXMgYSBzZXBhcmF0ZSBKU09OIG9iamVjdClcbiAgICAgICAgY29uc3QgcmVzdWx0TGluZXMgPSByZXN1bHRzVGV4dC50cmltKCkuc3BsaXQoJ1xcbicpO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFBhcnNlZCAke3Jlc3VsdExpbmVzLmxlbmd0aH0gcmVzdWx0IGxpbmVzYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9jZXNzIHRoZSBhY3R1YWwgcmVzdWx0cyBpbnN0ZWFkIG9mIHNpbXVsYXRpbmdcbiAgICAgICAgbGV0IGZldGNoZWRSZXN1bHRzID0gW107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmV0Y2hlZFJlc3VsdHMgPSByZXN1bHRMaW5lcy5tYXAobGluZSA9PiBKU09OLnBhcnNlKGxpbmUpKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFN1Y2Nlc3NmdWxseSBwYXJzZWQgJHtmZXRjaGVkUmVzdWx0cy5sZW5ndGh9IHJlc3VsdHNgKTtcbiAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBwYXJzaW5nIHJlc3VsdHM6ICR7cGFyc2VFcnJvcn1gKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBiYXRjaCByZXN1bHRzOiAke3BhcnNlRXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzcyB0aGUgYWN0dWFsIHJlc3VsdHMgZnJvbSBBbnRocm9waWMncyBBUElcbiAgICAgICAgLy8gVmFyaWFibGVzIGFyZSBhbHJlYWR5IGRlY2xhcmVkIGF0IHRoZSB0b3AgbGV2ZWwgb2YgdGhlIGZ1bmN0aW9uXG4gICAgICAgIFxuICAgICAgICAvLyBNYXAgQW50aHJvcGljJ3MgY3VzdG9tX2lkcyB0byB0YXJnZXQgc2VjdGlvbnNcbiAgICAgICAgY29uc3QgY3VzdG9tSWRUb1NlY3Rpb24gPSB7fTtcbiAgICAgICAgY29uc3Qgc2VjdGlvbnMgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzZWN0aW9ucycpPy5zcGxpdCgnLCcpIHx8IFxuICAgICAgICAgIFsnaGVhZGVyJywgJ2JhY2tncm91bmQnLCAnYXNzZXNzbWVudFJlc3VsdHMnLCAnY29uY2x1c2lvbiddO1xuICAgICAgICBcbiAgICAgICAgLy8gQnVpbGQgdGhlIG1hcHBpbmcgZnJvbSBjdXN0b21faWQgdG8gc2VjdGlvblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHNlY3Rpb25zW2ldO1xuICAgICAgICAgIGNvbnN0IGN1c3RvbUlkID0gYHVwZGF0ZS0ke3NlY3Rpb259YDsgIC8vIFRoaXMgbXVzdCBtYXRjaCB3aGF0IHdlIHNlbmQgaW4gdGhlIGJhdGNoIHJlcXVlc3RcbiAgICAgICAgICBjdXN0b21JZFRvU2VjdGlvbltjdXN0b21JZF0gPSBzZWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHRoZSByZXN1bHRzIGFuZCBwcm9jZXNzIGVhY2ggb25lXG4gICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIGZldGNoZWRSZXN1bHRzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEdldCB0aGUgc2VjdGlvbiBmcm9tIHRoZSBjdXN0b21faWRcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbUlkID0gcmVzdWx0LmN1c3RvbV9pZDtcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjdXN0b21JZFRvU2VjdGlvbltjdXN0b21JZF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OdIFByb2Nlc3NpbmcgcmVzdWx0IGZvciBjdXN0b21faWQ6ICR7Y3VzdG9tSWR9LCBzZWN0aW9uOiAke3NlY3Rpb24gfHwgJ3Vua25vd24nfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVzdWx0IHdhcyBzdWNjZXNzZnVsXG4gICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdD8udHlwZSA9PT0gJ3N1Y2NlZWRlZCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlc3VsdC5yZXN1bHQubWVzc2FnZTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChtZXNzYWdlPy5jb250ZW50ICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZS5jb250ZW50KSkge1xuICAgICAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgY29udGVudCBibG9ja3MgaW4gdGhlIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIG1lc3NhZ2UuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgdGhlIG9yaWdpbmFsIHRleHQgZm9yIGRlYnVnZ2luZyBpZiBpdCdzIHRoZSBhc3Nlc3NtZW50UmVzdWx0cyBzZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21JZCA9PT0gJ3VwZGF0ZS1hc3Nlc3NtZW50UmVzdWx0cycpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBFeGFtaW5pbmcgdGV4dCBmcm9tIGFzc2Vzc21lbnRSZXN1bHRzIGJsb2NrIChsZW5ndGg6ICR7YmxvY2sudGV4dC5sZW5ndGh9KWApO1xuICAgICAgICAgICAgICAgICAgICAgIC8vIE91dHB1dCBhIHNhbXBsZSBvZiB0aGUgdGV4dCBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk4QgQ29udGVudCBzYW1wbGU6ICR7YmxvY2sudGV4dC5zdWJzdHJpbmcoMCwgMjAwKX0uLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgSlNPTiBjb21tYW5kcyBpbiB0aGUgdGV4dCAtIHVzZSBhIG1vcmUgZm9yZ2l2aW5nIHJlZ2V4XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25NYXRjaGVzID0gYmxvY2sudGV4dC5tYXRjaCgvYGBganNvblxccyooe1tcXHNcXFNdKj99KVxccypgYGB8KHtbXFxzXFxTXSo/XCJjb21tYW5kXCJcXHMqOlxccypcInVwZGF0ZV9rZXlcIltcXHNcXFNdKj99KS9nKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uTWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgRm91bmQgJHtqc29uTWF0Y2hlcy5sZW5ndGh9IHBvdGVudGlhbCBKU09OIG1hdGNoZXMgaW4gJHtjdXN0b21JZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIGpzb25NYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBKU09OIG9iamVjdCBmcm9tIG1hcmtkb3duIGNvZGUgYmxvY2tzIG9yIHBsYWluIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGpzb25TdHIgPSBtYXRjaC5yZXBsYWNlKC9gYGBqc29uXFxzKnxcXHMqYGBgL2csICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZml4IGNvbW1vbiBKU09OIGVycm9ycyB0aGF0IG1pZ2h0IGJlIGluIENsYXVkZSdzIHJlc3BvbnNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpeCBlc2NhcGVkIHF1b3RlcyBpbiB2YWx1ZXMgKGEgY29tbW9uIGlzc3VlIHdpdGggSlNPTiBnZW5lcmF0ZWQgYnkgQ2xhdWRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb25TdHIgPSBqc29uU3RyLnJlcGxhY2UoLyhbXlxcXFxdKVxcXFxcIihbXlxcXFxdKS9nLCAnJDFcXFxcXFxcXFwiJDInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggbWlzc2luZyBjb21tYXMgYmV0d2VlbiBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvblN0ciA9IGpzb25TdHIucmVwbGFjZSgvfShcXHMqKXsvZywgJ30sXFxuJDF7Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRml4IHRyYWlsaW5nIGNvbW1hcyBpbiBvYmplY3RzIGFuZCBhcnJheXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uU3RyID0ganNvblN0ci5yZXBsYWNlKC8sKFxccypbXFx9XFxdXSkvZywgJyQxJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGZpeEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGZpeCBKU09OOiAke2ZpeEVycm9yfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGggdGhlIG9yaWdpbmFsIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZSBhcyBmdWxsIEpTT04gb2JqZWN0IHRvIHByZXNlcnZlIHN0cnVjdHVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQganNvbk9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uT2JqID0gSlNPTi5wYXJzZShqc29uU3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoanNvblBhcnNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvclBvc2l0aW9uID0gTnVtYmVyKGpzb25QYXJzZUVycm9yLm1lc3NhZ2Uuc3BsaXQoJyAnKS5wb3AoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEpTT04gcGFyc2UgZXJyb3IgYXQgcG9zaXRpb24gJHtlcnJvclBvc2l0aW9ufWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBhbiBleGNlcnB0IGFyb3VuZCB0aGUgZXJyb3IgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvckV4Y2VycHQgPSBqc29uU3RyLnN1YnN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIGVycm9yUG9zaXRpb24gLSA1MCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihqc29uU3RyLmxlbmd0aCwgZXJyb3JQb3NpdGlvbiArIDUwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKdjCBKU09OIHN0cmluZyB3aXRoIGVycm9yIChleGNlcnB0KTogJHtlcnJvckV4Y2VycHR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGFzc2Vzc21lbnRSZXN1bHRzIHNlY3Rpb24sIHRyeSB0byBtYW51YWxseSBmaXggdGhlIEpTT04gYXQgdGhlIGVycm9yIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbUlkID09PSAndXBkYXRlLWFzc2Vzc21lbnRSZXN1bHRzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCflKcgQXR0ZW1wdGluZyB0byBtYW51YWxseSBmaXggSlNPTiBmb3IgYXNzZXNzbWVudFJlc3VsdHNgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9nIHRoZSBjaGFyYWN0ZXIgYXQgdGhlIGVycm9yIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4p2MIENoYXJhY3RlciBhdCBlcnJvciBwb3NpdGlvbjogJyR7anNvblN0ci5jaGFyQXQoZXJyb3JQb3NpdGlvbil9JywgYmVmb3JlOiAnJHtqc29uU3RyLmNoYXJBdChlcnJvclBvc2l0aW9uLTEpfScsIGFmdGVyOiAnJHtqc29uU3RyLmNoYXJBdChlcnJvclBvc2l0aW9uKzEpfSdgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgc2ltcGxlIGRvbWFpbiB1cGRhdGUgdG8gcmVzY3VlIHNvbWUgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2ltcGxlQ29tbWFuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJ1cGRhdGVfa2V5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiYXNzZXNzbWVudFJlc3VsdHNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIm1lcmdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGFzc2Vzc21lbnQgdG9vbHMgZnJvbSB0aGUgaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3Nlc3NtZW50UHJvY2VkdXJlc0FuZFRvb2xzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVydmlld09mQXNzZXNzbWVudE1ldGhvZHM6IFwiQSBjb21iaW5hdGlvbiBvZiBzdGFuZGFyZGl6ZWQgbWVhc3VyZXMgYW5kIGNsaW5pY2FsIG9ic2VydmF0aW9ucyB3ZXJlIHVzZWQgdG8gYXNzZXNzIE1heWEncyBzcGVlY2ggYW5kIGxhbmd1YWdlIGFiaWxpdGllcy5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzc21lbnRUb29sc1VzZWQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJHb2xkbWFuLUZyaXN0b2UgVGVzdCBvZiBBcnRpY3VsYXRpb24tMyAoR0ZUQS0zKVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDbGluaWNhbCBFdmFsdWF0aW9uIG9mIExhbmd1YWdlIEZ1bmRhbWVudGFscy01IChDRUxGLTUpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBvYnNlcnZhdGlvbnMgZnJvbSB0aGUgc2Vzc2lvbiBub3Rlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmF0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3Nyb29tT2JzZXJ2YXRpb25zOiBcIlRlYWNoZXIgTXMuIFRob21hcyByZXBvcnRzIGNvbmNlcm5zIHdpdGggZm9sbG93aW5nIGRpcmVjdGlvbnMgYW5kIHBhcnRpY2lwYXRpbmcgaW4gZ3JvdXAgYWN0aXZpdGllcy5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlCYXNlZEluZm9ybWFsT2JzZXJ2YXRpb25zOiBcIk1heWEgZGVtb25zdHJhdGVkIGdvb2QgYXR0ZW50aW9uIHNwYW4gKDE1IG1pbnV0ZXMgb24gcGljdHVyZSBjYXJkcyB3aXRob3V0IHJlZGlyZWN0aW9uKS4gU2hlIGlkZW50aWZpZWQgMTgvMjAgb2JqZWN0cyBjb3JyZWN0bHksIG1pc3Npbmcgb25seSBjb2xhbmRlciBhbmQgdGhlcm1vcy5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZXB0aXZlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29uY2VybjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9waWNTZW50ZW5jZTogXCJNYXlhIGRlbW9uc3RyYXRlcyBzaWduaWZpY2FudCByZWNlcHRpdmUgbGFuZ3VhZ2UgZGlmZmljdWx0aWVzIGJhc2VkIG9uIGZvcm1hbCBhc3Nlc3NtZW50IGFuZCBjbGluaWNhbCBvYnNlcnZhdGlvbi5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGhzOiBbXCJJZGVudGlmaWVzIGNvbW1vbiBvYmplY3RzICgxOC8yMCBkdXJpbmcgcmVjZW50IHNlc3Npb24pXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkczogW1wiRm9sbG93aW5nIG11bHRpLXN0ZXAgZGlyZWN0aW9ucyAodHlwaWNhbGx5IG9ubHkgY29tcGxldGVzIGZpcnN0IHN0ZXAgYmVmb3JlIGFwcGVhcmluZyBjb25mdXNlZClcIiwgXCJVbmRlcnN0YW5kaW5nIGNsYXNzcm9vbSBpbnN0cnVjdGlvbnNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcGFjdFN0YXRlbWVudDogXCJSZWNlcHRpdmUgbGFuZ3VhZ2UgZGlmZmljdWx0aWVzIChDRUxGLTUgUmVjZXB0aXZlIExhbmd1YWdlIFNjb3JlOiA3OSwgOHRoIHBlcmNlbnRpbGUpIHNpZ25pZmljYW50bHkgaW1wYWN0IE1heWEncyBhYmlsaXR5IHRvIGZvbGxvdyBkaXJlY3Rpb25zIGluIHRoZSBjbGFzc3Jvb20gZW52aXJvbm1lbnQuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaXZlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29uY2VybjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9waWNTZW50ZW5jZTogXCJNYXlhIGRlbW9uc3RyYXRlcyBzaWduaWZpY2FudCBleHByZXNzaXZlIGxhbmd1YWdlIGRpZmZpY3VsdGllcyB3aXRoIGdyYW1tYXRpY2FsIGRldmVsb3BtZW50IGJlaW5nIGFuIGFyZWEgb2YgcGFydGljdWxhciBjb25jZXJuLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aHM6IFtcIlVzZXMgMi0zIHdvcmQgcGhyYXNlcyBmb3IgY29tbXVuaWNhdGlvblwiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHM6IFtcIkdyYW1tYXRpY2FsIG1hcmtlcnMgKG9taXR0aW5nIGFydGljbGVzLCAtaW5nIGVuZGluZ3MsIHBsdXJhbCAtcylcIiwgXCJTZW50ZW5jZSBmb3JtdWxhdGlvbiAoQ0VMRi01IEZvcm11bGF0ZWQgU2VudGVuY2VzIHN1YnRlc3Qgc2NvcmU6IDYpXCIsIFwiV29yZCBzdHJ1Y3R1cmUgKENFTEYtNSBzdWJ0ZXN0IHNjb3JlOiA0LCB2ZXJ5IGxvdylcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcGFjdFN0YXRlbWVudDogXCJFeHByZXNzaXZlIGxhbmd1YWdlIGRpZmZpY3VsdGllcyAoQ0VMRi01IEV4cHJlc3NpdmUgTGFuZ3VhZ2UgU2NvcmU6IDcyLCAzcmQgcGVyY2VudGlsZSkgc2lnbmlmaWNhbnRseSBpbXBhY3QgTWF5YSdzIGFiaWxpdHkgdG8gZWZmZWN0aXZlbHkgY29tbXVuaWNhdGUgaW4gYWNhZGVtaWMgYW5kIHNvY2lhbCBzZXR0aW5ncy5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydGljdWxhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0NvbmNlcm46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcGljU2VudGVuY2U6IFwiTWF5YSBwcmVzZW50cyB3aXRoIG11bHRpcGxlIGFydGljdWxhdGlvbiBlcnJvcnMgYWZmZWN0aW5nIG92ZXJhbGwgc3BlZWNoIGludGVsbGlnaWJpbGl0eSAoR0ZUQS0zIHJhdyBzY29yZTogNzYsIHN0YW5kYXJkIHNjb3JlOiA4NCwgMTR0aCBwZXJjZW50aWxlKS5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGhzOiBbXCIvcy8gaW4gaW5pdGlhbCBwb3NpdGlvbiBzaG93cyBpbXByb3ZlbWVudCAoODAlIGFjY3VyYWN5LCB1cCBmcm9tIGFwcHJveGltYXRlbHkgNjAlIGluIHByZXZpb3VzIHNlc3Npb24pXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkczogW1wiL3IvIHByb2R1Y3Rpb25cIiwgXCIvbC8gcHJvZHVjdGlvblwiLCBcInMtYmxlbmRzIChsZXNzIHRoYW4gNTAlIGFjY3VyYWN5KVwiLCBcInRoIHNvdW5kc1wiLCBcIlJlZHVjdGlvbiBvZiBmcm9udGluZyBwYXR0ZXJuc1wiLCBcIlJlZHVjdGlvbiBvZiBsYXRlcmFsaXphdGlvbiBvbiAvcy9cIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcGFjdFN0YXRlbWVudDogXCJBcnRpY3VsYXRpb24gZXJyb3JzIGFmZmVjdCBNYXlhJ3Mgc3BlZWNoIGludGVsbGlnaWJpbGl0eSwgcG90ZW50aWFsbHkgaW1wYWN0aW5nIHBlZXIgaW50ZXJhY3Rpb25zIGFuZCBjbGFzc3Jvb20gcGFydGljaXBhdGlvbi5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMgcmVzY3VlIGNvbW1hbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbW1hbmRzLnB1c2goc2ltcGxlQ29tbWFuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEFkZGVkIHJlc2N1ZSBjb21tYW5kIGZvciBhc3Nlc3NtZW50UmVzdWx0c2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgdXBkYXRlcyB0byB0aGUgcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUmVwb3J0ID0gYXBwbHlVcGRhdGVDb21tYW5kKHVwZGF0ZWRSZXBvcnQsIHNpbXBsZUNvbW1hbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYWZmZWN0ZWQgZG9tYWlucyB0byB0aGUgbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydyZWNlcHRpdmUnLCAnZXhwcmVzc2l2ZScsICdhcnRpY3VsYXRpb24nXS5mb3JFYWNoKGRvbWFpbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWZmZWN0ZWREb21haW5zLmluY2x1ZGVzKGRvbWFpbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZmZlY3RlZERvbWFpbnMucHVzaChkb21haW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCB0aHJvd2luZyB0aGUgZXJyb3Igc28gd2UgY2FuIGNvbnRpbnVlIHByb2Nlc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHJldHVybiBoZXJlIC0ganVzdCBjb250aW51ZSB3aXRoIHRoZSBuZXh0IGl0ZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3Igb3RoZXIgc2VjdGlvbnMsIHJlLXRocm93IHRvIGJlIGNhdWdodCBieSB0aGUgb3V0ZXIgdHJ5L2NhdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cganNvblBhcnNlRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYW4gdXBkYXRlX2tleSBjb21tYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uT2JqICYmIGpzb25PYmouY29tbWFuZCA9PT0gJ3VwZGF0ZV9rZXknICYmIGpzb25PYmoucGF0aCAmJiBqc29uT2JqLmFjdGlvbiAmJiBqc29uT2JqLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgY29tbWFuZCBmb3IgbGF0ZXIgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbW1hbmRzLnB1c2goanNvbk9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBhZmZlY3RzIGEgZG9tYWluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25PYmoucGF0aC5pbmNsdWRlcygnZG9tYWlucy4nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aFBhcnRzID0ganNvbk9iai5wYXRoLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkb21haW5JbmRleCA9IHBhdGhQYXJ0cy5maW5kSW5kZXgocGFydCA9PiBwYXJ0ID09PSAnZG9tYWlucycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbWFpbkluZGV4ICE9PSAtMSAmJiBwYXRoUGFydHMubGVuZ3RoID4gZG9tYWluSW5kZXggKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFmZmVjdGVkRG9tYWluID0gcGF0aFBhcnRzW2RvbWFpbkluZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWZmZWN0ZWREb21haW5zLmluY2x1ZGVzKGFmZmVjdGVkRG9tYWluKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmZmVjdGVkRG9tYWlucy5wdXNoKGFmZmVjdGVkRG9tYWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgdXBkYXRlIHRvIHRoZSByZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUmVwb3J0ID0gYXBwbHlVcGRhdGVDb21tYW5kKHVwZGF0ZWRSZXBvcnQsIGpzb25PYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgQXBwbGllZCB1cGRhdGUgdG8gcGF0aDogJHtqc29uT2JqLnBhdGh9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gRmFpbGVkIHRvIHBhcnNlIHBvdGVudGlhbCBKU09OIGNvbW1hbmQ6YCwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5yZXN1bHQ/LnR5cGUgPT09ICdlcnJvcmVkJykge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRXJyb3IgaW4gYmF0Y2ggcmVxdWVzdCAke2N1c3RvbUlkfTogJHtyZXN1bHQucmVzdWx0LmVycm9yPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChwcm9jZXNzRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBwcm9jZXNzaW5nIHJlc3VsdDogJHtwcm9jZXNzRXJyb3J9YCwgcmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIHdlIGRpZG4ndCBnZXQgYW55IGFjdHVhbCB1cGRhdGVzLCBmYWxsIGJhY2sgdG8gc2ltdWxhdGlvblxuICAgICAgICBpZiAodXBkYXRlQ29tbWFuZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gTm8gdXBkYXRlIGNvbW1hbmRzIGZvdW5kIGluIGJhdGNoIHJlc3VsdHMuIEZhbGxpbmcgYmFjayB0byBzaW11bGF0aW9uLmApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSBzaW11bGF0ZWQgdXBkYXRlcyBmb3IgZWFjaCBzZWN0aW9uXG4gICAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHNlY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAoc2VjdGlvbi5pbmNsdWRlcygnZG9tYWlucy4nKSkge1xuICAgICAgICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBzZWN0aW9uLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICAgIGNvbnN0IGRvbWFpbkluZGV4ID0gcGF0aFBhcnRzLmZpbmRJbmRleChwYXJ0ID0+IHBhcnQgPT09ICdkb21haW5zJyk7XG4gICAgICAgICAgICAgIGlmIChkb21haW5JbmRleCAhPT0gLTEgJiYgcGF0aFBhcnRzLmxlbmd0aCA+IGRvbWFpbkluZGV4ICsgMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvbWFpbiA9IHBhdGhQYXJ0c1tkb21haW5JbmRleCArIDFdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICghYWZmZWN0ZWREb21haW5zLmluY2x1ZGVzKGRvbWFpbikpIHtcbiAgICAgICAgICAgICAgICAgIGFmZmVjdGVkRG9tYWlucy5wdXNoKGRvbWFpbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUNvbW1hbmQgPSB7XG4gICAgICAgICAgICAgICAgICBjb21tYW5kOiAndXBkYXRlX2tleScsXG4gICAgICAgICAgICAgICAgICBwYXRoOiBgYXNzZXNzbWVudFJlc3VsdHMuZG9tYWlucy4ke2RvbWFpbn1gLFxuICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnbWVyZ2UnLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdG9waWNTZW50ZW5jZTogYFNpbXVsYXRlZCByZXNwb25zZSBmb3IgJHtkb21haW59IGxhbmd1YWdlIGRvbWFpbiAoYWN0dWFsIEFQSSByZXN1bHRzIGhhZCBubyBjb21tYW5kcykuYCxcbiAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGhzOiBbYFNpbXVsYXRlZCBzdHJlbmd0aCBmb3IgJHtkb21haW59YF0sXG4gICAgICAgICAgICAgICAgICAgIGlzQ29uY2VybjogZG9tYWluID09PSAncmVjZXB0aXZlJyB8fCBkb21haW4gPT09ICdleHByZXNzaXZlJyxcbiAgICAgICAgICAgICAgICAgICAgc2ltdWxhdGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB1cGRhdGVDb21tYW5kcy5wdXNoKHVwZGF0ZUNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRSZXBvcnQgPSBhcHBseVVwZGF0ZUNvbW1hbmQodXBkYXRlZFJlcG9ydCwgdXBkYXRlQ29tbWFuZCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBBcHBsaWVkIGZhbGxiYWNrIHNpbXVsYXRlZCB1cGRhdGUgdG8gZG9tYWluOiAke2RvbWFpbn1gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAocmVzdWx0c0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gZmV0Y2ggb3IgcHJvY2VzcyBiYXRjaCByZXN1bHRzOmAsIHJlc3VsdHNFcnJvcik7XG4gICAgICAgIFxuICAgICAgICAvLyBGYWxsIGJhY2sgdG8gc2ltdWxhdGlvbiBpZiB3ZSBjYW4ndCBmZXRjaCB0aGUgcmVzdWx0c1xuICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBGYWxsaW5nIGJhY2sgdG8gc2ltdWxhdGlvbiBtb2RlIGR1ZSB0byBlcnJvciBmZXRjaGluZyBiYXRjaCByZXN1bHRzYCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzZWN0aW9ucyA9IHNlYXJjaFBhcmFtcy5nZXQoJ3NlY3Rpb25zJyk/LnNwbGl0KCcsJykgfHwgXG4gICAgICAgICAgWydoZWFkZXInLCAnYmFja2dyb3VuZCcsICdhc3Nlc3NtZW50UmVzdWx0cycsICdjb25jbHVzaW9uJ107XG4gICAgICAgICAgXG4gICAgICAgIHVwZGF0ZWRSZXBvcnQgPSB7IC4uLm9yaWdpbmFsUmVwb3J0IH07IC8vIFVzZSB0aGUgb3V0ZXIgdmFyaWFibGUgaW5zdGVhZCBvZiByZWRlY2xhcmluZ1xuICAgICAgICB1cGRhdGVDb21tYW5kcy5sZW5ndGggPSAwOyAvLyBDbGVhciBhbnkgcGFydGlhbCBjb21tYW5kc1xuICAgICAgICBhZmZlY3RlZERvbWFpbnMubGVuZ3RoID0gMDsgLy8gQ2xlYXIgYW55IHBhcnRpYWwgYWZmZWN0ZWQgZG9tYWluc1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGEgc2ltdWxhdGVkIHVwZGF0ZSBmb3IgZWFjaCBzZWN0aW9uXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBzZWN0aW9uID0gc2VjdGlvbnNbaV07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBhIHBhdGggbGlrZSBcImFzc2Vzc21lbnRSZXN1bHRzLmRvbWFpbnMucmVjZXB0aXZlXCIsIGV4dHJhY3QgdGhlIGRvbWFpblxuICAgICAgICAgIGlmIChzZWN0aW9uLmluY2x1ZGVzKCdkb21haW5zLicpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBzZWN0aW9uLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICBjb25zdCBkb21haW5JbmRleCA9IHBhdGhQYXJ0cy5maW5kSW5kZXgocGFydCA9PiBwYXJ0ID09PSAnZG9tYWlucycpO1xuICAgICAgICAgICAgaWYgKGRvbWFpbkluZGV4ICE9PSAtMSAmJiBwYXRoUGFydHMubGVuZ3RoID4gZG9tYWluSW5kZXggKyAxKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRvbWFpbiA9IHBhdGhQYXJ0c1tkb21haW5JbmRleCArIDFdO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWRkIHRvIGFmZmVjdGVkIGRvbWFpbnMgaWYgbm90IGFscmVhZHkgaW5jbHVkZWRcbiAgICAgICAgICAgICAgaWYgKCFhZmZlY3RlZERvbWFpbnMuaW5jbHVkZXMoZG9tYWluKSkge1xuICAgICAgICAgICAgICAgIGFmZmVjdGVkRG9tYWlucy5wdXNoKGRvbWFpbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBhIHNpbXVsYXRlZCB1cGRhdGUgY29tbWFuZCBmb3IgdGhpcyBkb21haW5cbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlQ29tbWFuZCA9IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndXBkYXRlX2tleScsXG4gICAgICAgICAgICAgICAgcGF0aDogYGFzc2Vzc21lbnRSZXN1bHRzLmRvbWFpbnMuJHtkb21haW59YCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdtZXJnZScsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgIHRvcGljU2VudGVuY2U6IGBVcGRhdGVkIHZpYSBiYXRjaCBwcm9jZXNzaW5nIGZvciAke2RvbWFpbn0gbGFuZ3VhZ2UgZG9tYWluIChmYWxsYmFjaykuYCxcbiAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoczogW2BCYXRjaCBwcm9jZXNzZWQgc3RyZW5ndGggZm9yICR7ZG9tYWlufSAoZmFsbGJhY2spYF0sXG4gICAgICAgICAgICAgICAgICBpc0NvbmNlcm46IGRvbWFpbiA9PT0gJ3JlY2VwdGl2ZScgfHwgZG9tYWluID09PSAnZXhwcmVzc2l2ZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgdXBkYXRlIHRvIHRoZSByZXBvcnRcbiAgICAgICAgICAgICAgdXBkYXRlQ29tbWFuZHMucHVzaCh1cGRhdGVDb21tYW5kKTtcbiAgICAgICAgICAgICAgdXBkYXRlZFJlcG9ydCA9IGFwcGx5VXBkYXRlQ29tbWFuZCh1cGRhdGVkUmVwb3J0LCB1cGRhdGVDb21tYW5kKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSBBcHBsaWVkIGZhbGxiYWNrIHVwZGF0ZSB0byBkb21haW46ICR7ZG9tYWlufWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHZhbGlkIHJlcG9ydCB0byB1cGRhdGVcbiAgICAgIGlmICghdXBkYXRlZFJlcG9ydCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgTm8gdXBkYXRlZCByZXBvcnQgYXZhaWxhYmxlLCB1c2luZyBvcmlnaW5hbCByZXBvcnRgKTtcbiAgICAgICAgdXBkYXRlZFJlcG9ydCA9IHsgLi4ub3JpZ2luYWxSZXBvcnQgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIG1ldGFkYXRhXG4gICAgICBpZiAodXBkYXRlZFJlcG9ydCAmJiB1cGRhdGVkUmVwb3J0Lm1ldGFkYXRhKSB7XG4gICAgICAgIHVwZGF0ZWRSZXBvcnQubWV0YWRhdGEubGFzdFVwZGF0ZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIHVwZGF0ZWRSZXBvcnQubWV0YWRhdGEudmVyc2lvbiA9ICh1cGRhdGVkUmVwb3J0Lm1ldGFkYXRhLnZlcnNpb24gfHwgMCkgKyAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIFVwZGF0ZWQgcmVwb3J0IGRvZXMgbm90IGhhdmUgYSBtZXRhZGF0YSBmaWVsZGApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXR1cm4gdGhlIHVwZGF0ZWQgcmVwb3J0IGFsb25nIHdpdGggdGhlIGJhdGNoIHN0YXR1c1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgcmVwb3J0OiB1cGRhdGVkUmVwb3J0LFxuICAgICAgICBiYXRjaFN0YXR1cyxcbiAgICAgICAgdXBkYXRlQ29tbWFuZHMsXG4gICAgICAgIGFmZmVjdGVkRG9tYWlucyxcbiAgICAgICAgY29tcGxldGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGN1cnJlbnQgc3RhdHVzIGZvciBjbGllbnQgcG9sbGluZ1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgYmF0Y2hTdGF0dXMsXG4gICAgICAgIGNvbXBsZXRlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBjaGVja2luZyBiYXRjaCBzdGF0dXM6YCwgZXJyb3IpO1xuICAgIFxuICAgIC8vIEZhbGwgYmFjayB0byBzaW11bGF0aW9uIG1vZGUgb24gYW55IGVycm9yXG4gICAgY29uc3QgcmVwb3J0SnNvbiA9IHNlYXJjaFBhcmFtcy5nZXQoJ3JlcG9ydCcpO1xuICAgIGxldCBvcmlnaW5hbFJlcG9ydDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgaWYgKHJlcG9ydEpzb24pIHtcbiAgICAgICAgb3JpZ2luYWxSZXBvcnQgPSBKU09OLnBhcnNlKHJlcG9ydEpzb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXBvcnQgbm90IHByb3ZpZGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWYgd2UgY2FuJ3QgZXZlbiBwYXJzZSB0aGUgcmVwb3J0LCBzZW5kIGEgZ2VuZXJpYyBlcnJvciByZXNwb25zZVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNoZWNrIGJhdGNoIHN0YXR1cyBhbmQgY291bGQgbm90IHBhcnNlIHJlcG9ydCBmb3Igc2ltdWxhdGlvbicsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBmYWxsYmFjayByZXNwb25zZSB1c2luZyBzaW11bGF0ZWQgZGF0YVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBiYXRjaFN0YXR1czoge1xuICAgICAgICBpZDogYmF0Y2hJZCxcbiAgICAgICAgc3RhdHVzOiAncnVubmluZycsXG4gICAgICAgIHJlcXVlc3RzOiBBcnJheSg0KS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gKHtcbiAgICAgICAgICBjdXN0b21faWQ6IGB1cGRhdGUtZmFsbGJhY2stJHtpfWAsXG4gICAgICAgICAgc3RhdHVzOiBpIDwgMiA/ICdjb21wbGV0ZWQnIDogJ3BlbmRpbmcnXG4gICAgICAgIH0pKSxcbiAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDUwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHNpbXVsYXRlZDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIHByb2dyZXNzOiA1MCxcbiAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgIHNpbXVsYXRlZDogdHJ1ZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIG1lc3NhZ2U6IFwiVXNpbmcgZmFsbGJhY2sgc2ltdWxhdGlvbiBtb2RlIGR1ZSB0byB1bmV4cGVjdGVkIGVycm9yXCJcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEFwcGx5IGFuIHVwZGF0ZV9rZXkgY29tbWFuZCB0byBhIHJlcG9ydFxuICovXG5mdW5jdGlvbiBhcHBseVVwZGF0ZUNvbW1hbmQocmVwb3J0OiBhbnksIGNvbW1hbmQ6IGFueSk6IGFueSB7XG4gIGNvbnN0IHVwZGF0ZWRSZXBvcnQgPSB7IC4uLnJlcG9ydCB9O1xuICBcbiAgdHJ5IHtcbiAgICAvLyBBcHBseSB0aGUgdXBkYXRlIGJhc2VkIG9uIHRoZSBwYXRoIGFuZCBhY3Rpb25cbiAgICBjb25zdCBwYXRoUGFydHMgPSBjb21tYW5kLnBhdGguc3BsaXQoJy4nKTtcbiAgICBsZXQgY3VycmVudCA9IHVwZGF0ZWRSZXBvcnQ7XG4gICAgXG4gICAgLy8gTmF2aWdhdGUgdG8gdGhlIHBhcmVudCBvYmplY3Qgb2YgdGhlIHRhcmdldCBwcm9wZXJ0eVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aFBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgY29uc3QgcGFydCA9IHBhdGhQYXJ0c1tpXTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIG1pc3Npbmcgb2JqZWN0cyBpbiB0aGUgcGF0aFxuICAgICAgaWYgKCFjdXJyZW50W3BhcnRdKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBuZXh0IHBhdGggc2VnbWVudCBpcyBhIG51bWJlciAoYXJyYXkgaW5kZXgpXG4gICAgICAgIGNvbnN0IG5leHRQYXJ0ID0gcGF0aFBhcnRzW2kgKyAxXTtcbiAgICAgICAgY29uc3QgaXNOZXh0UGFydEFycmF5SW5kZXggPSAhaXNOYU4ocGFyc2VJbnQobmV4dFBhcnQpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhcHByb3ByaWF0ZSBjb250YWluZXIgdHlwZSAoYXJyYXkgb3Igb2JqZWN0KVxuICAgICAgICBjdXJyZW50W3BhcnRdID0gaXNOZXh0UGFydEFycmF5SW5kZXggPyBbXSA6IHt9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjdXJyZW50ID0gY3VycmVudFtwYXJ0XTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHRoZSB0YXJnZXQgcHJvcGVydHkgbmFtZVxuICAgIGNvbnN0IHRhcmdldFByb3AgPSBwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdO1xuICAgIFxuICAgIC8vIEFwcGx5IHRoZSBhY3Rpb25cbiAgICBzd2l0Y2ggKGNvbW1hbmQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdhcHBlbmQnOlxuICAgICAgICAvLyBGb3IgYXJyYXlzLCBhcHBlbmQgdGhlIG5ldyB2YWx1ZXNcbiAgICAgICAgaWYgKCFjdXJyZW50W3RhcmdldFByb3BdKSB7XG4gICAgICAgICAgY3VycmVudFt0YXJnZXRQcm9wXSA9IFtdO1xuICAgICAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KGN1cnJlbnRbdGFyZ2V0UHJvcF0pKSB7XG4gICAgICAgICAgLy8gQ29udmVydCB0byBhcnJheSBpZiBub3QgYWxyZWFkeVxuICAgICAgICAgIGN1cnJlbnRbdGFyZ2V0UHJvcF0gPSBbY3VycmVudFt0YXJnZXRQcm9wXV07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBib3RoIHNpbmdsZSB2YWx1ZSBhbmQgYXJyYXkgb2YgdmFsdWVzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbW1hbmQudmFsdWUpKSB7XG4gICAgICAgICAgY3VycmVudFt0YXJnZXRQcm9wXSA9IFsuLi5jdXJyZW50W3RhcmdldFByb3BdLCAuLi5jb21tYW5kLnZhbHVlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50W3RhcmdldFByb3BdLnB1c2goY29tbWFuZC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAncmVwbGFjZSc6XG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIHZhbHVlIGVudGlyZWx5XG4gICAgICAgIGN1cnJlbnRbdGFyZ2V0UHJvcF0gPSBjb21tYW5kLnZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBjYXNlICdtZXJnZSc6XG4gICAgICAgIC8vIEZvciBvYmplY3RzLCBkZWVwIG1lcmdlIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKCFjdXJyZW50W3RhcmdldFByb3BdIHx8IHR5cGVvZiBjdXJyZW50W3RhcmdldFByb3BdICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGN1cnJlbnRbdGFyZ2V0UHJvcF0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY3VycmVudFt0YXJnZXRQcm9wXSA9IGRlZXBNZXJnZShjdXJyZW50W3RhcmdldFByb3BdLCBjb21tYW5kLnZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gVW5rbm93biBhY3Rpb246ICR7Y29tbWFuZC5hY3Rpb259YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgZG9tYWluIHVwZGF0ZXMgLSBjaGVjayBpZiB0aGlzIGlzIGEgZG9tYWluIHRoYXQgc2hvdWxkIGJlIG1hcmtlZCBhcyBhIGNvbmNlcm5cbiAgICBpZiAoY29tbWFuZC5wYXRoLmluY2x1ZGVzKCdkb21haW5zLicpICYmIChjb21tYW5kLmFjdGlvbiA9PT0gJ21lcmdlJyB8fCBjb21tYW5kLmFjdGlvbiA9PT0gJ3JlcGxhY2UnKSkge1xuICAgICAgY29uc3QgcGF0aFBhcnRzID0gY29tbWFuZC5wYXRoLnNwbGl0KCcuJyk7XG4gICAgICBjb25zdCBkb21haW5JbmRleCA9IHBhdGhQYXJ0cy5maW5kSW5kZXgocGFydCA9PiBwYXJ0ID09PSAnZG9tYWlucycpO1xuICAgICAgXG4gICAgICBpZiAoZG9tYWluSW5kZXggIT09IC0xICYmIHBhdGhQYXJ0cy5sZW5ndGggPiBkb21haW5JbmRleCArIDEpIHtcbiAgICAgICAgY29uc3QgZG9tYWluID0gcGF0aFBhcnRzW2RvbWFpbkluZGV4ICsgMV07XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB2YWx1ZSBjb250YWlucyBpc0NvbmNlcm4gcHJvcGVydHksIHVwZGF0ZSBpdCBpbiBlbGlnaWJpbGl0eSBzZWN0aW9uXG4gICAgICAgIGlmIChjb21tYW5kLnZhbHVlICYmIGNvbW1hbmQudmFsdWUuaXNDb25jZXJuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB1cGRhdGVkUmVwb3J0LmNvbmNsdXNpb24uZWxpZ2liaWxpdHkuZG9tYWluc1tkb21haW5dID0gY29tbWFuZC52YWx1ZS5pc0NvbmNlcm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIGRvbWFpbiBuZWVkcyBleGlzdCBhbmQgbm9uLWVtcHR5LCBtYXJrIGFzIGNvbmNlcm4gYXV0b21hdGljYWxseVxuICAgICAgICBpZiAoY29tbWFuZC52YWx1ZSAmJiBcbiAgICAgICAgICAgIGNvbW1hbmQudmFsdWUubmVlZHMgJiYgXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KGNvbW1hbmQudmFsdWUubmVlZHMpICYmIFxuICAgICAgICAgICAgY29tbWFuZC52YWx1ZS5uZWVkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gT25seSBhdXRvLXNldCBjb25jZXJuIGlmIGl0J3Mgbm90IGV4cGxpY2l0bHkgc2V0IHRvIGZhbHNlXG4gICAgICAgICAgaWYgKGNvbW1hbmQudmFsdWUuaXNDb25jZXJuICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdXBkYXRlZFJlcG9ydC5jb25jbHVzaW9uLmVsaWdpYmlsaXR5LmRvbWFpbnNbZG9tYWluXSA9IHRydWU7XG4gICAgICAgICAgICB1cGRhdGVkUmVwb3J0LmFzc2Vzc21lbnRSZXN1bHRzLmRvbWFpbnNbZG9tYWluXS5pc0NvbmNlcm4gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdXBkYXRlZFJlcG9ydDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGDinYwgRXJyb3IgYXBwbHlpbmcgdXBkYXRlIGNvbW1hbmQ6YCwgZXJyb3IpO1xuICAgIC8vIFJldHVybiB0aGUgb3JpZ2luYWwgcmVwb3J0IGlmIHRoZSB1cGRhdGUgZmFpbHNcbiAgICByZXR1cm4gcmVwb3J0O1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImRlZXBNZXJnZSIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJuZXh0VXJsIiwiYmF0Y2hJZCIsImdldCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImlzU2ltdWxhdGVkIiwic3RhcnRzV2l0aCIsImNvbnNvbGUiLCJsb2ciLCJyZXBvcnRKc29uIiwib3JpZ2luYWxSZXBvcnQiLCJKU09OIiwicGFyc2UiLCJFcnJvciIsImUiLCJwb2xsQ291bnQiLCJwYXJzZUludCIsInNlY3Rpb25zIiwic3BsaXQiLCJzaW11bGF0ZWRTdGF0dXMiLCJzaW11bGF0ZWRQcm9ncmVzcyIsIk1hdGgiLCJtaW4iLCJyb3VuZCIsImNvbXBsZXRlZFJlcXVlc3RzIiwibGVuZ3RoIiwiZmxvb3IiLCJ1cGRhdGVkUmVwb3J0IiwidGFyZ2V0RG9tYWluIiwiYXNzZXNzbWVudFJlc3VsdHMiLCJkb21haW5zIiwidG9waWNTZW50ZW5jZSIsInN0cmVuZ3RocyIsIm1ldGFkYXRhIiwibGFzdFVwZGF0ZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ2ZXJzaW9uIiwidXBkYXRlQ29tbWFuZHMiLCJjb21tYW5kIiwicGF0aCIsImFjdGlvbiIsInZhbHVlIiwiYmF0Y2hTdGF0dXMiLCJpZCIsInJlcXVlc3RzIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiXyIsImkiLCJjdXN0b21faWQiLCJjcmVhdGVkIiwibm93Iiwic2ltdWxhdGVkIiwicmVwb3J0IiwiYWZmZWN0ZWREb21haW5zIiwiY29tcGxldGUiLCJwcm9ncmVzcyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJBTlRIUk9QSUNfQVBJX0tFWSIsIm1lc3NhZ2UiLCJzdGF0dXNSZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIm9rIiwiZXJyb3JEYXRhIiwicHJvY2Vzc2luZ19zdGF0dXMiLCJyZXN1bHRzX3VybCIsInJlc3VsdHNSZXNwb25zZSIsInN0YXR1c1RleHQiLCJyZXN1bHRzVGV4dCIsInRleHQiLCJzdWJzdHJpbmciLCJyZXN1bHRMaW5lcyIsInRyaW0iLCJmZXRjaGVkUmVzdWx0cyIsImxpbmUiLCJwYXJzZUVycm9yIiwiY3VzdG9tSWRUb1NlY3Rpb24iLCJzZWN0aW9uIiwiY3VzdG9tSWQiLCJyZXN1bHQiLCJ0eXBlIiwiY29udGVudCIsImlzQXJyYXkiLCJibG9jayIsImpzb25NYXRjaGVzIiwibWF0Y2giLCJqc29uU3RyIiwicmVwbGFjZSIsImZpeEVycm9yIiwid2FybiIsImpzb25PYmoiLCJqc29uUGFyc2VFcnJvciIsImVycm9yUG9zaXRpb24iLCJOdW1iZXIiLCJwb3AiLCJlcnJvckV4Y2VycHQiLCJtYXgiLCJjaGFyQXQiLCJzaW1wbGVDb21tYW5kIiwiYXNzZXNzbWVudFByb2NlZHVyZXNBbmRUb29scyIsIm92ZXJ2aWV3T2ZBc3Nlc3NtZW50TWV0aG9kcyIsImFzc2Vzc21lbnRUb29sc1VzZWQiLCJvYnNlcnZhdGlvbnMiLCJjbGFzc3Jvb21PYnNlcnZhdGlvbnMiLCJwbGF5QmFzZWRJbmZvcm1hbE9ic2VydmF0aW9ucyIsInJlY2VwdGl2ZSIsImlzQ29uY2VybiIsIm5lZWRzIiwiaW1wYWN0U3RhdGVtZW50IiwiZXhwcmVzc2l2ZSIsImFydGljdWxhdGlvbiIsInB1c2giLCJhcHBseVVwZGF0ZUNvbW1hbmQiLCJmb3JFYWNoIiwiZG9tYWluIiwiaW5jbHVkZXMiLCJ1bmRlZmluZWQiLCJwYXRoUGFydHMiLCJkb21haW5JbmRleCIsImZpbmRJbmRleCIsInBhcnQiLCJhZmZlY3RlZERvbWFpbiIsInByb2Nlc3NFcnJvciIsInVwZGF0ZUNvbW1hbmQiLCJyZXN1bHRzRXJyb3IiLCJkZXRhaWxzIiwiY3VycmVudCIsIm5leHRQYXJ0IiwiaXNOZXh0UGFydEFycmF5SW5kZXgiLCJpc05hTiIsInRhcmdldFByb3AiLCJjb25jbHVzaW9uIiwiZWxpZ2liaWxpdHkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/text-editor-test/status/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/reportUtils.ts":
/*!********************************!*\
  !*** ./src/lib/reportUtils.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createReportSkeleton: () => (/* binding */ createReportSkeleton),\n/* harmony export */   deepMerge: () => (/* binding */ deepMerge),\n/* harmony export */   normalizeInput: () => (/* binding */ normalizeInput),\n/* harmony export */   updateDomainSection: () => (/* binding */ updateDomainSection)\n/* harmony export */ });\n/**\n * Normalize input data from various sources (text, PDF, audio)\n * @param input - Input data in various formats\n */ async function normalizeInput(input) {\n    // Handle different input formats\n    if (typeof input === 'string') {\n        return input;\n    } else if (input.text) {\n        return input.text;\n    } else if (input.pdfData) {\n        // Return the base64 PDF data - Claude will process it with its document capability\n        return input.pdfData;\n    }\n    return JSON.stringify(input);\n}\n/**\n * Create a default report skeleton if none exists\n */ function createReportSkeleton() {\n    return {\n        header: {\n            studentInformation: {\n                firstName: \"\",\n                lastName: \"\",\n                DOB: \"\",\n                reportDate: \"\",\n                evaluationDate: \"\",\n                parents: [],\n                homeLanguage: \"\"\n            },\n            reasonForReferral: \"\",\n            confidentialityStatement: \"\"\n        },\n        background: {\n            studentDemographicsAndBackground: {\n                educationalHistory: \"\"\n            },\n            healthReport: {\n                medicalHistory: \"\",\n                visionAndHearingScreening: \"\",\n                medicationsAndAllergies: \"\"\n            },\n            earlyInterventionHistory: \"\",\n            familyHistory: {\n                familyStructure: \"\",\n                languageAndCulturalBackground: \"\",\n                socioeconomicFactors: \"\"\n            },\n            parentGuardianConcerns: \"\"\n        },\n        assessmentResults: {\n            observations: {\n                classroomObservations: \"\",\n                playBasedInformalObservations: \"\",\n                socialInteractionObservations: \"\"\n            },\n            assessmentProceduresAndTools: {\n                overviewOfAssessmentMethods: \"\",\n                assessmentToolsUsed: [] // IDs of assessment tools\n            },\n            domains: {\n                receptive: {\n                    isConcern: false,\n                    topicSentence: \"\",\n                    strengths: [],\n                    needs: [],\n                    impactStatement: \"\"\n                },\n                expressive: {\n                    isConcern: false,\n                    topicSentence: \"\",\n                    strengths: [],\n                    needs: [],\n                    impactStatement: \"\"\n                },\n                pragmatic: {\n                    isConcern: false,\n                    topicSentence: \"\",\n                    strengths: [],\n                    needs: [],\n                    impactStatement: \"\"\n                },\n                articulation: {\n                    isConcern: false,\n                    topicSentence: \"\",\n                    strengths: [],\n                    needs: [],\n                    impactStatement: \"\"\n                },\n                voice: {\n                    isConcern: false,\n                    topicSentence: \"\",\n                    strengths: [],\n                    needs: [],\n                    impactStatement: \"\"\n                },\n                fluency: {\n                    isConcern: false,\n                    topicSentence: \"\",\n                    strengths: [],\n                    needs: [],\n                    impactStatement: \"\"\n                }\n            }\n        },\n        conclusion: {\n            eligibility: {\n                domains: {\n                    receptive: false,\n                    expressive: false,\n                    pragmatic: false,\n                    articulation: false,\n                    voice: false,\n                    fluency: false\n                },\n                californiaEdCode: \"\"\n            },\n            conclusion: {\n                summary: \"\"\n            },\n            recommendations: {\n                services: {\n                    typeOfService: \"\",\n                    frequency: \"\",\n                    setting: \"\"\n                },\n                accommodations: [],\n                facilitationStrategies: []\n            },\n            parentFriendlyGlossary: {\n                terms: {}\n            }\n        },\n        metadata: {\n            lastUpdated: new Date().toISOString(),\n            version: 1\n        }\n    };\n}\n/**\n * Deep merge utility function for properly merging nested objects and arrays\n */ function deepMerge(target, source) {\n    // Handle edge cases\n    if (!source || typeof source !== 'object') return source;\n    if (!target || typeof target !== 'object') return {\n        ...source\n    };\n    // Create a new object to avoid mutating the original\n    const result = {\n        ...target\n    };\n    Object.keys(source).forEach((key)=>{\n        const targetValue = result[key];\n        const sourceValue = source[key];\n        // Handle arrays - prefer source arrays over target arrays\n        if (Array.isArray(sourceValue)) {\n            result[key] = [\n                ...sourceValue\n            ]; // Create a new array to prevent reference issues\n        } else if (typeof sourceValue === 'object' && sourceValue !== null && typeof targetValue === 'object' && targetValue !== null && !Array.isArray(targetValue)) {\n            result[key] = deepMerge(targetValue, sourceValue);\n        } else {\n            result[key] = sourceValue;\n        }\n    });\n    return result;\n}\n/**\n * Update a specific domain section with new data\n */ function updateDomainSection(report, domain, updates) {\n    const updatedReport = {\n        ...report\n    };\n    // Initialize domain if it doesn't exist\n    if (!updatedReport.assessmentResults.domains[domain]) {\n        updatedReport.assessmentResults.domains[domain] = {\n            isConcern: false,\n            topicSentence: '',\n            strengths: [],\n            needs: [],\n            impactStatement: ''\n        };\n    }\n    // Update specific fields\n    if (updates.isConcern !== undefined) {\n        updatedReport.assessmentResults.domains[domain].isConcern = updates.isConcern;\n    }\n    if (updates.topicSentence) {\n        updatedReport.assessmentResults.domains[domain].topicSentence = updates.topicSentence;\n    }\n    if (updates.strengths && updates.strengths.length > 0) {\n        updatedReport.assessmentResults.domains[domain].strengths = [\n            ...updatedReport.assessmentResults.domains[domain].strengths || [],\n            ...updates.strengths\n        ];\n    }\n    if (updates.needs && updates.needs.length > 0) {\n        updatedReport.assessmentResults.domains[domain].needs = [\n            ...updatedReport.assessmentResults.domains[domain].needs || [],\n            ...updates.needs\n        ];\n    }\n    if (updates.impactStatement) {\n        updatedReport.assessmentResults.domains[domain].impactStatement = updates.impactStatement;\n    }\n    // Also update the eligibility status if this is an area of concern\n    if (updates.isConcern !== undefined) {\n        updatedReport.conclusion.eligibility.domains[domain] = updates.isConcern;\n    }\n    // Update metadata\n    updatedReport.metadata.lastUpdated = new Date().toISOString();\n    updatedReport.metadata.version += 1;\n    return updatedReport;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjbEMsVUFBVSxDQUFDQyxXQUFXLENBQUNiLE9BQU8sQ0FBQzRDLE9BQU8sR0FBR0MsUUFBUTNDLFNBQVM7SUFDMUU7SUFFQSxrQkFBa0I7SUFDbEI0QyxjQUFjckIsUUFBUSxDQUFDQyxXQUFXLEdBQUcsSUFBSUMsT0FBT0MsV0FBVztJQUMzRGtCLGNBQWNyQixRQUFRLENBQUNJLE9BQU8sSUFBSTtJQUVsQyxPQUFPaUI7QUFDVCIsInNvdXJjZXMiOlsiL1VzZXJzL2JyYW5kb25icmV3ZXIvRG9jdW1lbnRzL0xpbmd1b3NpdHkvTGluZ3Vvc2l0eS9zcmMvbGliL3JlcG9ydFV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvbWFpblNlY3Rpb24sIFNwZWVjaExhbmd1YWdlUmVwb3J0IH0gZnJvbSAnQC90eXBlcy9yZXBvcnRUeXBlcyc7XG5cbi8qKlxuICogTm9ybWFsaXplIGlucHV0IGRhdGEgZnJvbSB2YXJpb3VzIHNvdXJjZXMgKHRleHQsIFBERiwgYXVkaW8pXG4gKiBAcGFyYW0gaW5wdXQgLSBJbnB1dCBkYXRhIGluIHZhcmlvdXMgZm9ybWF0c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbm9ybWFsaXplSW5wdXQoaW5wdXQ6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIEhhbmRsZSBkaWZmZXJlbnQgaW5wdXQgZm9ybWF0c1xuICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfSBlbHNlIGlmIChpbnB1dC50ZXh0KSB7XG4gICAgcmV0dXJuIGlucHV0LnRleHQ7XG4gIH0gZWxzZSBpZiAoaW5wdXQucGRmRGF0YSkge1xuICAgIC8vIFJldHVybiB0aGUgYmFzZTY0IFBERiBkYXRhIC0gQ2xhdWRlIHdpbGwgcHJvY2VzcyBpdCB3aXRoIGl0cyBkb2N1bWVudCBjYXBhYmlsaXR5XG4gICAgcmV0dXJuIGlucHV0LnBkZkRhdGE7XG4gIH1cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGlucHV0KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBkZWZhdWx0IHJlcG9ydCBza2VsZXRvbiBpZiBub25lIGV4aXN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVwb3J0U2tlbGV0b24oKTogU3BlZWNoTGFuZ3VhZ2VSZXBvcnQge1xuICByZXR1cm4ge1xuICAgIGhlYWRlcjoge1xuICAgICAgc3R1ZGVudEluZm9ybWF0aW9uOiB7XG4gICAgICAgIGZpcnN0TmFtZTogXCJcIixcbiAgICAgICAgbGFzdE5hbWU6IFwiXCIsXG4gICAgICAgIERPQjogXCJcIixcbiAgICAgICAgcmVwb3J0RGF0ZTogXCJcIixcbiAgICAgICAgZXZhbHVhdGlvbkRhdGU6IFwiXCIsXG4gICAgICAgIHBhcmVudHM6IFtdLFxuICAgICAgICBob21lTGFuZ3VhZ2U6IFwiXCJcbiAgICAgIH0sXG4gICAgICByZWFzb25Gb3JSZWZlcnJhbDogXCJcIixcbiAgICAgIGNvbmZpZGVudGlhbGl0eVN0YXRlbWVudDogXCJcIlxuICAgIH0sXG4gICAgYmFja2dyb3VuZDoge1xuICAgICAgc3R1ZGVudERlbW9ncmFwaGljc0FuZEJhY2tncm91bmQ6IHtcbiAgICAgICAgZWR1Y2F0aW9uYWxIaXN0b3J5OiBcIlwiXG4gICAgICB9LFxuICAgICAgaGVhbHRoUmVwb3J0OiB7XG4gICAgICAgIG1lZGljYWxIaXN0b3J5OiBcIlwiLFxuICAgICAgICB2aXNpb25BbmRIZWFyaW5nU2NyZWVuaW5nOiBcIlwiLFxuICAgICAgICBtZWRpY2F0aW9uc0FuZEFsbGVyZ2llczogXCJcIlxuICAgICAgfSxcbiAgICAgIGVhcmx5SW50ZXJ2ZW50aW9uSGlzdG9yeTogXCJcIixcbiAgICAgIGZhbWlseUhpc3Rvcnk6IHtcbiAgICAgICAgZmFtaWx5U3RydWN0dXJlOiBcIlwiLFxuICAgICAgICBsYW5ndWFnZUFuZEN1bHR1cmFsQmFja2dyb3VuZDogXCJcIixcbiAgICAgICAgc29jaW9lY29ub21pY0ZhY3RvcnM6IFwiXCJcbiAgICAgIH0sXG4gICAgICBwYXJlbnRHdWFyZGlhbkNvbmNlcm5zOiBcIlwiXG4gICAgfSxcbiAgICBhc3Nlc3NtZW50UmVzdWx0czoge1xuICAgICAgb2JzZXJ2YXRpb25zOiB7XG4gICAgICAgIGNsYXNzcm9vbU9ic2VydmF0aW9uczogXCJcIixcbiAgICAgICAgcGxheUJhc2VkSW5mb3JtYWxPYnNlcnZhdGlvbnM6IFwiXCIsXG4gICAgICAgIHNvY2lhbEludGVyYWN0aW9uT2JzZXJ2YXRpb25zOiBcIlwiXG4gICAgICB9LFxuICAgICAgYXNzZXNzbWVudFByb2NlZHVyZXNBbmRUb29sczoge1xuICAgICAgICBvdmVydmlld09mQXNzZXNzbWVudE1ldGhvZHM6IFwiXCIsXG4gICAgICAgIGFzc2Vzc21lbnRUb29sc1VzZWQ6IFtdIC8vIElEcyBvZiBhc3Nlc3NtZW50IHRvb2xzXG4gICAgICB9LFxuICAgICAgZG9tYWluczoge1xuICAgICAgICByZWNlcHRpdmU6IHtcbiAgICAgICAgICBpc0NvbmNlcm46IGZhbHNlLFxuICAgICAgICAgIHRvcGljU2VudGVuY2U6IFwiXCIsXG4gICAgICAgICAgc3RyZW5ndGhzOiBbXSxcbiAgICAgICAgICBuZWVkczogW10sXG4gICAgICAgICAgaW1wYWN0U3RhdGVtZW50OiBcIlwiXG4gICAgICAgIH0sXG4gICAgICAgIGV4cHJlc3NpdmU6IHtcbiAgICAgICAgICBpc0NvbmNlcm46IGZhbHNlLFxuICAgICAgICAgIHRvcGljU2VudGVuY2U6IFwiXCIsXG4gICAgICAgICAgc3RyZW5ndGhzOiBbXSxcbiAgICAgICAgICBuZWVkczogW10sXG4gICAgICAgICAgaW1wYWN0U3RhdGVtZW50OiBcIlwiXG4gICAgICAgIH0sXG4gICAgICAgIHByYWdtYXRpYzoge1xuICAgICAgICAgIGlzQ29uY2VybjogZmFsc2UsXG4gICAgICAgICAgdG9waWNTZW50ZW5jZTogXCJcIixcbiAgICAgICAgICBzdHJlbmd0aHM6IFtdLFxuICAgICAgICAgIG5lZWRzOiBbXSxcbiAgICAgICAgICBpbXBhY3RTdGF0ZW1lbnQ6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgYXJ0aWN1bGF0aW9uOiB7XG4gICAgICAgICAgaXNDb25jZXJuOiBmYWxzZSxcbiAgICAgICAgICB0b3BpY1NlbnRlbmNlOiBcIlwiLFxuICAgICAgICAgIHN0cmVuZ3RoczogW10sXG4gICAgICAgICAgbmVlZHM6IFtdLFxuICAgICAgICAgIGltcGFjdFN0YXRlbWVudDogXCJcIlxuICAgICAgICB9LFxuICAgICAgICB2b2ljZToge1xuICAgICAgICAgIGlzQ29uY2VybjogZmFsc2UsXG4gICAgICAgICAgdG9waWNTZW50ZW5jZTogXCJcIixcbiAgICAgICAgICBzdHJlbmd0aHM6IFtdLFxuICAgICAgICAgIG5lZWRzOiBbXSxcbiAgICAgICAgICBpbXBhY3RTdGF0ZW1lbnQ6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgZmx1ZW5jeToge1xuICAgICAgICAgIGlzQ29uY2VybjogZmFsc2UsXG4gICAgICAgICAgdG9waWNTZW50ZW5jZTogXCJcIixcbiAgICAgICAgICBzdHJlbmd0aHM6IFtdLFxuICAgICAgICAgIG5lZWRzOiBbXSxcbiAgICAgICAgICBpbXBhY3RTdGF0ZW1lbnQ6IFwiXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY29uY2x1c2lvbjoge1xuICAgICAgZWxpZ2liaWxpdHk6IHtcbiAgICAgICAgZG9tYWluczoge1xuICAgICAgICAgIHJlY2VwdGl2ZTogZmFsc2UsXG4gICAgICAgICAgZXhwcmVzc2l2ZTogZmFsc2UsXG4gICAgICAgICAgcHJhZ21hdGljOiBmYWxzZSxcbiAgICAgICAgICBhcnRpY3VsYXRpb246IGZhbHNlLFxuICAgICAgICAgIHZvaWNlOiBmYWxzZSxcbiAgICAgICAgICBmbHVlbmN5OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBjYWxpZm9ybmlhRWRDb2RlOiBcIlwiXG4gICAgICB9LFxuICAgICAgY29uY2x1c2lvbjoge1xuICAgICAgICBzdW1tYXJ5OiBcIlwiXG4gICAgICB9LFxuICAgICAgcmVjb21tZW5kYXRpb25zOiB7XG4gICAgICAgIHNlcnZpY2VzOiB7XG4gICAgICAgICAgdHlwZU9mU2VydmljZTogXCJcIixcbiAgICAgICAgICBmcmVxdWVuY3k6IFwiXCIsXG4gICAgICAgICAgc2V0dGluZzogXCJcIlxuICAgICAgICB9LFxuICAgICAgICBhY2NvbW1vZGF0aW9uczogW10sXG4gICAgICAgIGZhY2lsaXRhdGlvblN0cmF0ZWdpZXM6IFtdXG4gICAgICB9LFxuICAgICAgcGFyZW50RnJpZW5kbHlHbG9zc2FyeToge1xuICAgICAgICB0ZXJtczoge31cbiAgICAgIH1cbiAgICB9LFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdmVyc2lvbjogMVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBEZWVwIG1lcmdlIHV0aWxpdHkgZnVuY3Rpb24gZm9yIHByb3Blcmx5IG1lcmdpbmcgbmVzdGVkIG9iamVjdHMgYW5kIGFycmF5c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcE1lcmdlKHRhcmdldDogYW55LCBzb3VyY2U6IGFueSk6IGFueSB7XG4gIC8vIEhhbmRsZSBlZGdlIGNhc2VzXG4gIGlmICghc291cmNlIHx8IHR5cGVvZiBzb3VyY2UgIT09ICdvYmplY3QnKSByZXR1cm4gc291cmNlO1xuICBpZiAoIXRhcmdldCB8fCB0eXBlb2YgdGFyZ2V0ICE9PSAnb2JqZWN0JykgcmV0dXJuIHsgLi4uc291cmNlIH07XG4gIFxuICAvLyBDcmVhdGUgYSBuZXcgb2JqZWN0IHRvIGF2b2lkIG11dGF0aW5nIHRoZSBvcmlnaW5hbFxuICBjb25zdCByZXN1bHQgPSB7IC4uLnRhcmdldCB9O1xuICBcbiAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0VmFsdWUgPSByZXN1bHRba2V5XTtcbiAgICBjb25zdCBzb3VyY2VWYWx1ZSA9IHNvdXJjZVtrZXldO1xuICAgIFxuICAgIC8vIEhhbmRsZSBhcnJheXMgLSBwcmVmZXIgc291cmNlIGFycmF5cyBvdmVyIHRhcmdldCBhcnJheXNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2VWYWx1ZSkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gWy4uLnNvdXJjZVZhbHVlXTsgLy8gQ3JlYXRlIGEgbmV3IGFycmF5IHRvIHByZXZlbnQgcmVmZXJlbmNlIGlzc3Vlc1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBtZXJnZSBvYmplY3RzIChidXQgbm90IGFycmF5cylcbiAgICBlbHNlIGlmIChcbiAgICAgIHR5cGVvZiBzb3VyY2VWYWx1ZSA9PT0gJ29iamVjdCcgJiYgXG4gICAgICBzb3VyY2VWYWx1ZSAhPT0gbnVsbCAmJiBcbiAgICAgIHR5cGVvZiB0YXJnZXRWYWx1ZSA9PT0gJ29iamVjdCcgJiYgXG4gICAgICB0YXJnZXRWYWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgIUFycmF5LmlzQXJyYXkodGFyZ2V0VmFsdWUpXG4gICAgKSB7XG4gICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZSh0YXJnZXRWYWx1ZSwgc291cmNlVmFsdWUpO1xuICAgIH1cbiAgICAvLyBGb3IgcHJpbWl0aXZlcyBvciBuZXcgb2JqZWN0cywgdXNlIHRoZSBzb3VyY2UgdmFsdWVcbiAgICBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gc291cmNlVmFsdWU7XG4gICAgfVxuICB9KTtcbiAgXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVXBkYXRlIGEgc3BlY2lmaWMgZG9tYWluIHNlY3Rpb24gd2l0aCBuZXcgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRG9tYWluU2VjdGlvbihcbiAgcmVwb3J0OiBTcGVlY2hMYW5ndWFnZVJlcG9ydCxcbiAgZG9tYWluOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8RG9tYWluU2VjdGlvbj5cbik6IFNwZWVjaExhbmd1YWdlUmVwb3J0IHtcbiAgY29uc3QgdXBkYXRlZFJlcG9ydCA9IHsgLi4ucmVwb3J0IH07XG4gIFxuICAvLyBJbml0aWFsaXplIGRvbWFpbiBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gIGlmICghdXBkYXRlZFJlcG9ydC5hc3Nlc3NtZW50UmVzdWx0cy5kb21haW5zW2RvbWFpbl0pIHtcbiAgICB1cGRhdGVkUmVwb3J0LmFzc2Vzc21lbnRSZXN1bHRzLmRvbWFpbnNbZG9tYWluXSA9IHtcbiAgICAgIGlzQ29uY2VybjogZmFsc2UsXG4gICAgICB0b3BpY1NlbnRlbmNlOiAnJyxcbiAgICAgIHN0cmVuZ3RoczogW10sXG4gICAgICBuZWVkczogW10sXG4gICAgICBpbXBhY3RTdGF0ZW1lbnQ6ICcnXG4gICAgfTtcbiAgfVxuICBcbiAgLy8gVXBkYXRlIHNwZWNpZmljIGZpZWxkc1xuICBpZiAodXBkYXRlcy5pc0NvbmNlcm4gIT09IHVuZGVmaW5lZCkge1xuICAgIHVwZGF0ZWRSZXBvcnQuYXNzZXNzbWVudFJlc3VsdHMuZG9tYWluc1tkb21haW5dLmlzQ29uY2VybiA9IHVwZGF0ZXMuaXNDb25jZXJuO1xuICB9XG4gIFxuICBpZiAodXBkYXRlcy50b3BpY1NlbnRlbmNlKSB7XG4gICAgdXBkYXRlZFJlcG9ydC5hc3Nlc3NtZW50UmVzdWx0cy5kb21haW5zW2RvbWFpbl0udG9waWNTZW50ZW5jZSA9IHVwZGF0ZXMudG9waWNTZW50ZW5jZTtcbiAgfVxuICBcbiAgaWYgKHVwZGF0ZXMuc3RyZW5ndGhzICYmIHVwZGF0ZXMuc3RyZW5ndGhzLmxlbmd0aCA+IDApIHtcbiAgICB1cGRhdGVkUmVwb3J0LmFzc2Vzc21lbnRSZXN1bHRzLmRvbWFpbnNbZG9tYWluXS5zdHJlbmd0aHMgPSBbXG4gICAgICAuLi4odXBkYXRlZFJlcG9ydC5hc3Nlc3NtZW50UmVzdWx0cy5kb21haW5zW2RvbWFpbl0uc3RyZW5ndGhzIHx8IFtdKSxcbiAgICAgIC4uLnVwZGF0ZXMuc3RyZW5ndGhzXG4gICAgXTtcbiAgfVxuICBcbiAgaWYgKHVwZGF0ZXMubmVlZHMgJiYgdXBkYXRlcy5uZWVkcy5sZW5ndGggPiAwKSB7XG4gICAgdXBkYXRlZFJlcG9ydC5hc3Nlc3NtZW50UmVzdWx0cy5kb21haW5zW2RvbWFpbl0ubmVlZHMgPSBbXG4gICAgICAuLi4odXBkYXRlZFJlcG9ydC5hc3Nlc3NtZW50UmVzdWx0cy5kb21haW5zW2RvbWFpbl0ubmVlZHMgfHwgW10pLFxuICAgICAgLi4udXBkYXRlcy5uZWVkc1xuICAgIF07XG4gIH1cbiAgXG4gIGlmICh1cGRhdGVzLmltcGFjdFN0YXRlbWVudCkge1xuICAgIHVwZGF0ZWRSZXBvcnQuYXNzZXNzbWVudFJlc3VsdHMuZG9tYWluc1tkb21haW5dLmltcGFjdFN0YXRlbWVudCA9IHVwZGF0ZXMuaW1wYWN0U3RhdGVtZW50O1xuICB9XG4gIFxuICAvLyBBbHNvIHVwZGF0ZSB0aGUgZWxpZ2liaWxpdHkgc3RhdHVzIGlmIHRoaXMgaXMgYW4gYXJlYSBvZiBjb25jZXJuXG4gIGlmICh1cGRhdGVzLmlzQ29uY2VybiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdXBkYXRlZFJlcG9ydC5jb25jbHVzaW9uLmVsaWdpYmlsaXR5LmRvbWFpbnNbZG9tYWluXSA9IHVwZGF0ZXMuaXNDb25jZXJuO1xuICB9XG4gIFxuICAvLyBVcGRhdGUgbWV0YWRhdGFcbiAgdXBkYXRlZFJlcG9ydC5tZXRhZGF0YS5sYXN0VXBkYXRlZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgdXBkYXRlZFJlcG9ydC5tZXRhZGF0YS52ZXJzaW9uICs9IDE7XG4gIFxuICByZXR1cm4gdXBkYXRlZFJlcG9ydDtcbn0iXSwibmFtZXMiOlsibm9ybWFsaXplSW5wdXQiLCJpbnB1dCIsInRleHQiLCJwZGZEYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZVJlcG9ydFNrZWxldG9uIiwiaGVhZGVyIiwic3R1ZGVudEluZm9ybWF0aW9uIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJET0IiLCJyZXBvcnREYXRlIiwiZXZhbHVhdGlvbkRhdGUiLCJwYXJlbnRzIiwiaG9tZUxhbmd1YWdlIiwicmVhc29uRm9yUmVmZXJyYWwiLCJjb25maWRlbnRpYWxpdHlTdGF0ZW1lbnQiLCJiYWNrZ3JvdW5kIiwic3R1ZGVudERlbW9ncmFwaGljc0FuZEJhY2tncm91bmQiLCJlZHVjYXRpb25hbEhpc3RvcnkiLCJoZWFsdGhSZXBvcnQiLCJtZWRpY2FsSGlzdG9yeSIsInZpc2lvbkFuZEhlYXJpbmdTY3JlZW5pbmciLCJtZWRpY2F0aW9uc0FuZEFsbGVyZ2llcyIsImVhcmx5SW50ZXJ2ZW50aW9uSGlzdG9yeSIsImZhbWlseUhpc3RvcnkiLCJmYW1pbHlTdHJ1Y3R1cmUiLCJsYW5ndWFnZUFuZEN1bHR1cmFsQmFja2dyb3VuZCIsInNvY2lvZWNvbm9taWNGYWN0b3JzIiwicGFyZW50R3VhcmRpYW5Db25jZXJucyIsImFzc2Vzc21lbnRSZXN1bHRzIiwib2JzZXJ2YXRpb25zIiwiY2xhc3Nyb29tT2JzZXJ2YXRpb25zIiwicGxheUJhc2VkSW5mb3JtYWxPYnNlcnZhdGlvbnMiLCJzb2NpYWxJbnRlcmFjdGlvbk9ic2VydmF0aW9ucyIsImFzc2Vzc21lbnRQcm9jZWR1cmVzQW5kVG9vbHMiLCJvdmVydmlld09mQXNzZXNzbWVudE1ldGhvZHMiLCJhc3Nlc3NtZW50VG9vbHNVc2VkIiwiZG9tYWlucyIsInJlY2VwdGl2ZSIsImlzQ29uY2VybiIsInRvcGljU2VudGVuY2UiLCJzdHJlbmd0aHMiLCJuZWVkcyIsImltcGFjdFN0YXRlbWVudCIsImV4cHJlc3NpdmUiLCJwcmFnbWF0aWMiLCJhcnRpY3VsYXRpb24iLCJ2b2ljZSIsImZsdWVuY3kiLCJjb25jbHVzaW9uIiwiZWxpZ2liaWxpdHkiLCJjYWxpZm9ybmlhRWRDb2RlIiwic3VtbWFyeSIsInJlY29tbWVuZGF0aW9ucyIsInNlcnZpY2VzIiwidHlwZU9mU2VydmljZSIsImZyZXF1ZW5jeSIsInNldHRpbmciLCJhY2NvbW1vZGF0aW9ucyIsImZhY2lsaXRhdGlvblN0cmF0ZWdpZXMiLCJwYXJlbnRGcmllbmRseUdsb3NzYXJ5IiwidGVybXMiLCJtZXRhZGF0YSIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidmVyc2lvbiIsImRlZXBNZXJnZSIsInRhcmdldCIsInNvdXJjZSIsInJlc3VsdCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwidGFyZ2V0VmFsdWUiLCJzb3VyY2VWYWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsInVwZGF0ZURvbWFpblNlY3Rpb24iLCJyZXBvcnQiLCJkb21haW4iLCJ1cGRhdGVzIiwidXBkYXRlZFJlcG9ydCIsInVuZGVmaW5lZCIsImxlbmd0aCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/reportUtils.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftext-editor-test%2Fstatus%2Froute&page=%2Fapi%2Ftext-editor-test%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftext-editor-test%2Fstatus%2Froute.ts&appDir=%2FUsers%2Fbrandonbrewer%2FDocuments%2FLinguosity%2FLinguosity%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbrandonbrewer%2FDocuments%2FLinguosity%2FLinguosity&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();